<!DOCTYPE html>
<html lang="de-de">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https:\/\/blog.gc2.at\/"
        },
        "articleSection" : "post",
        "name" : "C# Installation",
        "headline" : "C# Installation",
        "description" : "\u003cp\u003eUm zur aktuellsten C# Mono Version zu kommen muss diese manuell installiert werden. Diese Anleitung zeigt wie und hilft einen Stolperstein für die Raspberry Pi Zero zu vermeiden.\u003c\/p\u003e",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2019",
        "datePublished": "2019-12-26 00:00:00 \u002b0000 UTC",
        "dateModified" : "2019-12-26 00:00:00 \u002b0000 UTC",
        "url" : "https:\/\/blog.gc2.at\/post\/cs\/",
        "wordCount" : "714",
        "image" : "https:\/\/blog.gc2.at\/img\/cs.png",
        "keywords" : [ "Blog" ]   
    }
    </script>


 <title>C# Installation </title>


<meta name="description" content="Blog des Grazer Computer Club - GC2" />



<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" id="ct-tracks-google-fonts-css" href="https://fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

<link href="https://blog.gc2.at/css/style.css?v=1749285579" rel="stylesheet" id="theme-stylesheet" type='text/css' media='all'>

<link href="https://blog.gc2.at/css/custom.css?v=1749285579" rel="stylesheet" type='text/css' media='all'>
<link rel="shortcut icon" href="https://blog.gc2.at/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://blog.gc2.at/img/favicon.ico" type="image/x-icon">

</head>


<body class="post-template-default single single-post single-format-standard ct-body singular singular-post not-front standard">

  <div id="overflow-container" class="overflow-container">
    <a class="skip-content" href="#main">Skip to content</a>
    <header id="site-header" class="site-header" role="banner">
      <div class='top-navigation'>
        <div class='container'>

  <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
    <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fas fa-plus"></i></button>

    <div class="menu">

      <ul id="menu-secondary-items" class="menu-secondary-items">
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/ccc">ccc</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/gc2">gc2</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/minecraft">minecraft</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/programmierung">programmierung</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/raspberry-pi">raspberry pi</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/raspberry-pi-pico">raspberry pi pico</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/raspberry-pi-zero">raspberry pi zero</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/uc">uc</a>
        </li>
        

      </ul>

    </div>

  </div>


  <ul class="social-media-icons">


    

    

    
    <li>
      <a href="https://twitter.com/_gc2_" data-animate-hover="pulse" class="twitter" target="_blank">
        <i class="fab fa-twitter-square" title="twitter"></i>
        <span class="screen-reader-text">twitter</span>
      </a>
    </li>
    

    

    
    <li>
      <a href="mailto:blog@gc2.at" data-animate-hover="pulse" class="email">
        <i class="fas fa-envelope" title="email"></i>
        <span class="screen-reader-text">email</span>
      </a>
    </li>
    

    

    


    
    <li>
      <a href="https://github.com/GrazerComputerClub/" data-animate-hover="pulse" class="github" target="_blank">
        <i class="fab fa-github" title="github"></i>
        <span class="screen-reader-text">github</span>
      </a>
    </li>
    


    



  </ul></div>

      </div>

      <div class="container">
        <div id="title-info" class="title-info">
  <div id='site-title' class='site-title'>
    
    <a href="/"> GC2 Blog </a>
    </div>
  </div>
  <button id="toggle-navigation" class="toggle-navigation">
    <i class="fas fa-bars"></i>
  </button>

  <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
  <div id="menu-primary" class="menu-container menu-primary" role="navigation">
    
    <p class="site-description">Infos rund um Computer, Programmierung, Elektronik und sonstige Informatik</p>
    

    <div class="menu">
      <ul id="menu-primary-items" class="menu-primary-items">
        
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://blog.gc2.at/index.html">Blog (Deutsch)</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://grazercomputerclub.github.io/BlogEN/index.html">Blog (English)</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://blog.gc2.at/impressum/">Impressum</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="http://gc2.at">Hauptseite</a>
          
        </li>
        
      </ul>
    </div>

  </div>

      </div>
    </header>

    <div id="main" class="main" role="main">

      
  
  
    
  
  
  <div id="loop-container" class="loop-container">
    
    <div class="post type-post status-publish format-standard has-post-thumbnail hentry category-design tag-design tag-standard-2 tag-tagalicious tag-travel entry full-without-featured odd excerpt-1">

      <div class='featured-image lazy lazy-bg-image'  data-background="https://blog.gc2.at/img/cs.png">
      </div>
      
        <div class="entry-meta">
          <span class="date">26 December</span>	<span> / </span>

          <span class="author">
            <a href="http://strohmayers.com" title="Posts von Martin Strohmayer" rel="author">Martin Strohmayer</a>
          </span>


          
          <span class="category">
            <span> / </span>

            <a href="/categories/gc2">GC2</a>
          </span>
          
          <span class="category">
            <span> / </span>

            <a href="/categories/raspberry-pi-zero">Raspberry Pi Zero</a>
          </span>
          
          <span class="category">
            <span> / </span>

            <a href="/categories/raspberry-pi">Raspberry Pi</a>
          </span>
          


        </div>
        <div class='entry-header'>
          <h1 class='entry-title'> C# Installation</h1>
        </div>
        <div class="entry-container">
          <div class="entry-content">
            <article>
              <p>Um zur aktuellsten C# Mono Version zu kommen muss diese manuell installiert werden. Diese Anleitung zeigt wie und hilft einen Stolperstein für die Raspberry Pi Zero zu vermeiden.</p>
<h2 id="beschreibung">Beschreibung</h2>
<p>Wer C# auf dem Raspberry Pi Zero programmieren bzw. verwenden möchte ist auf das <a href="https://www.mono-project.com/">Mono Projekt</a> angewiesen. Es unterstützt sowohl den alten ARM11-Prozessor mit ARMv6 Architektur als auch die neuen ARMv7 kompatiblen Prozessoren. Ein einfacher Aufruf von &ldquo;sudo apt-get install mono-complete&rdquo; reicht eigentlich zur Installation aus. Dann erhält man aber eine etwas ältere Version.</p>
<pre tabindex="0"><code>mono -V
</code></pre><pre tabindex="0"><code>Mono JIT compiler version 5.18.0.240 (Debian 5.18.0.240+dfsg-3 Sat Apr 20 05:16:08 UTC 2019)
Copyright (C) 2002-2014 Novell, Inc, Xamarin Inc and Contributors. www.mono-project.com
	TLS:           
	SIGSEGV:       normal
	Notifications: epoll
	Architecture:  armel,vfp+hard
	Disabled:      none
	Misc:          softdebug 
	Interpreter:   yes
	LLVM:          supported, not enabled.
	Suspend:       preemptive
	GC:            sgen (concurrent by default)
</code></pre><p>Möchte man die neuste Version installieren muss man manuell einige Schritte durchführen.</p>
<h2 id="installation">Installation</h2>
<pre tabindex="0"><code>sudo apt-get install apt-transport-https dirmngr gnupg ca-certificates
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF
echo &#34;deb https://download.mono-project.com/repo/debian stable-raspbianbuster main&#34; | sudo tee /etc/apt/sources.list.d/mono-official-stable.list
sudo apt-get update
sudo apt-get install mono-complete
</code></pre><pre tabindex="0"><code>mono -V
</code></pre><pre tabindex="0"><code>Mono JIT compiler version 6.4.0.198 (tarball Tue Sep 24 01:45:47 UTC 2019)
Copyright (C) 2002-2014 Novell, Inc, Xamarin Inc and Contributors. www.mono-project.com
	TLS:           __thread
	SIGSEGV:       normal
	Notifications: epoll
	Architecture:  armel,vfp+hard
	Disabled:      none
	Misc:          softdebug 
	Interpreter:   yes
	LLVM:          yes(610)
	Suspend:       preemptive
	GC:            sgen (concurrent by default)
</code></pre><h2 id="raspberry-pi-zero">Raspberry Pi Zero</h2>
<h3 id="problembeschreibung">Problembeschreibung</h3>
<p>Untypisch bei der Installation des mono-complete Paketes ist, dass Bibliotheken am Zielsystem kompiliert werden.
Auf den ersten Blick kann man das ja als verständlich erachten, bei näherer Betrachtung ergeben sich aber Probleme.<br>
Ja nach System auf dem installiert wird, werden binär unterschiedliche Bibliotheken erzeugt. Wird nun mono auf einer neueren Raspberry Pi (ab Version 2) erzeugt, so kann diese SD-Karte nicht mehr in einer Raspberry Pi Zero eingesetzt werden. Offensichtlich sind die erzeugen Bibliotheken nicht kompatibel mit der alten ARMv6 Architektur. Sobald das Programm &ldquo;mono&rdquo; bzw. &ldquo;/usr/bin/mono-sgen&rdquo; ausgeführt wird, kommt es zum Absturz.<br>
Durch den Aufruf von &ldquo;dpkg-reconfigure&rdquo; können die Bibliotheken am Zielsystem neu erzeugt werden. Dazu muss man aber jedes der problematischen Pakete kennen.
Mir ist es bisher nicht gelungen auf diese Art mono korrekt neu zu erzeugen! Die folgende unvollständige Liste der Pakte habe ich bisher ermittelt:</p>
<pre tabindex="0"><code>sudo dpkg-reconfigure libmono-corlib4.5-cil 
Mono precompiling /usr/lib/mono/4.5/mscorlib.dll for arm (LLVM disabled due to missing SSE4.1)...
</code></pre><pre tabindex="0"><code>sudo dpkg-reconfigure mono-mcs
Mono precompiling /usr/lib/mono/4.5/mcs.exe for arm (LLVM disabled due to missing SSE4.1)...
</code></pre><pre tabindex="0"><code>sudo dpkg-reconfigure mono-roslyn
Mono precompiling /usr/lib/mono/4.5/csc.exe for arm (LLVM disabled due to missing SSE4.1)...
Mono precompiling /usr/lib/mono/4.5/vbc.exe for arm (LLVM disabled due to missing SSE4.1)...
Mono precompiling /usr/lib/mono/4.5/VBCSCompiler.exe for arm (LLVM disabled due to missing SSE4.1)...
Mono precompiling /usr/lib/mono/4.5/Microsoft.CodeAnalysis.CSharp.dll for arm (LLVM disabled due to missing SSE4.1)...
Mono precompiling /usr/lib/mono/4.5/Microsoft.CodeAnalysis.VisualBasic.dll for arm (LLVM disabled due to missing SSE4.1)...
Mono precompiling /usr/lib/mono/4.5/Microsoft.CodeAnalysis.dll for arm (LLVM disabled due to missing SSE4.1)...
Mono precompiling /usr/lib/mono/4.5/System.Collections.Immutable.dll for arm (LLVM disabled due to missing SSE4.1)...
Mono precompiling /usr/lib/mono/4.5/System.Reflection.Metadata.dll for arm (LLVM disabled due to missing SSE4.1)...
</code></pre><p>Die besagten problematischen Bibliotheken befinden sich alle im Verzeichnis &ldquo;/usr/lib/mono/aot-cache/arm&rdquo;. Mit dem Tool &ldquo;md5sum&rdquo; kann man einen Hash der binären Dateien errechnen und erkennt dann, dass auf unterschiedlichen Systemen andere Bibliotheken erzeugt wurden.</p>
<p><strong>Raspberry Pi 3+:</strong></p>
<pre tabindex="0"><code>5a171770d300363e3ec2eb60a854c481  csc.exe.so
df8506376fdf137d863e3bba99716b07  mcs.exe.so
4015357bc969c8a9be7193d59555debc  Microsoft.CodeAnalysis.CSharp.dll.so
4c55c6475790d96c7a245df5afa22358  Microsoft.CodeAnalysis.dll.so
c3c739f4753d6fa2770be8704f6f61a6  Microsoft.CodeAnalysis.VisualBasic.dll.so
405641746541bb05ea82ac45f20f5696  mscorlib.dll.so
8a32754f92db9671bd3beacc0bc3689d  System.Collections.Immutable.dll.so
1a4ec59a04636afaa39112fef86e7229  System.Reflection.Metadata.dll.so
32fcdc11684481eb72f638b3dce0cf8e  vbc.exe.so
ce4d8efa2c3ddac3b42b8e8ffa6407f6  VBCSCompiler.exe.so
</code></pre><p><strong>Raspberry Pi Zero:</strong></p>
<pre tabindex="0"><code>85ad88c49857e8ca89ba4ae00e8c1fd3  csc.exe.so
3bef36c9fe11d7e99367cf9b23c32853  mcs.exe.so
322fdde542e899c12479c71f3d7b1dec  Microsoft.CodeAnalysis.CSharp.dll.so
28666816903d4a5d16312cf21320833e  Microsoft.CodeAnalysis.dll.so
d146515c05c29292c401789f0bb4fdf2  Microsoft.CodeAnalysis.VisualBasic.dll.so
b0f1c0f302c96d49ec699152445fa96d  mscorlib.dll.so
33bb1dcc310d5db62bcf4f06df475976  System.Collections.Immutable.dll.so
be3df82bb795a9224f916113f5bbeeab  System.Reflection.Metadata.dll.so
5dc11adaa95f1e942f1fb98ca4673b1f  vbc.exe.so
bd646f0b1c23b90cf0ea90f15231e439  VBCSCompiler.exe.so
</code></pre><p>Der genaue Grund warum die Bibliotheken am Raspberry Pi Zero nicht funktionieren ist mir nicht bekannt. Die Dateien werden möglicherweise mit dem Assembler &ldquo;as&rdquo; erzeugt. Hier wird der Optimierungsparameter &ldquo;-mfpu=vfp3&rdquo; verwendet. Als Beschreibung findet man &ldquo;Enable the ARMv7 VFPv3 floating-point extension. Disable the Advanced SIMD extension&rdquo;. Dieser Optimierung sollte eigentlich auf dem ARM11 nicht funktionieren, ob dies aber zum Absturz führt, ist nicht bekannt.<br>
Aktualisierung 1.11.2020: Auch bei Update/Installation auf einem Raspberry Pi 1 wird beim Kompilieren der Parameter &ldquo;-mfpu=vfp3&rdquo; angewendet.</p>
<h3 id="lösung-gc2-raspjamming">Lösung (GC2 Raspjamming)</h3>
<p>Das Problem trifft vor allem bei unserem Raspjamming Image auf, wenn das Image auf einem ARMv7 System erzeugt wird. Auf einem x86_64-System bei dem eine Emulation (qemu) Verwendung findet, tritt das Problem nicht auf.<br>
Als Lösung wird von uns nach der Installation von mono, die Library-Dateien überschrieben. Sie wurden einmalig von einem Raspberry Pi Zero System gesichert.
Diese sind dann auch für neue Raspberry Pi Einplatinencomputer geeignet.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
            </article>
          </div>
          
      <div class='entry-meta-bottom'>
        

  
    <div class="entry-categories"><p><span>Kategorien</span>
  
    
    <a href="/categories/gc2" title="View all posts in GC2">GC2</a>
    <a href="/categories/raspberry-pi-zero" title="View all posts in Raspberry Pi Zero">Raspberry Pi Zero</a>
    <a href="/categories/raspberry-pi" title="View all posts in Raspberry Pi">Raspberry Pi</a>
  </p>
</div>



<div class="entry-tags"><p><span>Tags</span>
  

</p></div>	</div>

	
<div class="author-meta">

  <div class="author">
    	
    <img alt='Martin Strohmayer' src="https://www.gravatar.com/avatar/dc376a825706457b68caa281714897d5?s=100&d=identicon" class='avatar avatar-72 photo' height='72' width='72'>
    
    <span>
      Geschrieben von:<a href="http://strohmayers.com" title="Posts von Martin Strohmayer" rel="author">Martin Strohmayer</a> </span>
    </div>
    <div class="bio">
      
      
      <p>Softwareentwickler und Raspberry Pi Enthusiast.</p>
        
      
	
      

    


  
  <a class="twitter" target="_blank"
  href="https://twitter.com/m_stroh">
  <i class="fab fa-twitter-square"
  title="twitter icon"></i>
</a>




<a class="email" target="_blank"
href="mailto:martin.strohmayer@gc2.at">
<i class="fas fa-envelope"
title="email icon"></i>
</a>







<a class="github" target="_blank"
href="https://github.com/mstroh76">
<i class="fab fa-github"
title="github icon"></i>
</a>









</div>
</div>

</div>
</div>

<section id="comments" class="comments">




<script src="https://utteranc.es/client.js"
        repo="GrazerComputerClub/Blog"
        issue-term="title"
        
        theme="github-light"
        
        crossorigin="anonymous"
        async>
</script>


  

  




</section>
</div>

 



    </div>

    
<footer id="site-footer" class="site-footer" role="contentinfo">
	<h1>
    
    <a href=""> GC2 Blog </a>
    
	</h1>

			
			<p class="site-description">Infos rund um Computer, Programmierung, Elektronik und sonstige Informatik</p>
			

		<div id="menu-footer" class="menu-container menu-footer" role="navigation">
		<div class="menu">

      <ul id="menu-footer-items" class="menu-footer-items">
        
</ul>

</div>	</div>

<ul class="social-media-icons">

        

        


        
        <li>
        <a href="https://twitter.com/_gc2_"  class="twitter" target="_blank">
            <i class="fab fa-twitter-square" title="twitter"></i>
            <span class="screen-reader-text">twitter</span>
        </a>
        </li>
        

        

        
        <li>
        <a href="mailto:blog@gc2.at"  class="email">
            <i class="fas fa-envelope" title="email"></i>
            <span class="screen-reader-text">email</span>
        </a>
        </li>
        

        

        


        
        <li>
        <a href="https://github.com/GrazerComputerClub/"  class="github" target="_blank">
            <i class="fab fa-github" title="github"></i>
            <span class="screen-reader-text">github</span>
        </a>
        </li>
        


        

				</ul>	<div class="design-credit">
		
		<p>CC-BY-4.0 <a href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></p>
		
		<p>2022, Grazer Computer Club e. V.</p>
		
		<p>Nederburg Hugo Theme by <a href="https://appernetic.io">Appernetic</a>.</p>
		
	</div>
</footer>

  </div>
  <script src="https://blog.gc2.at/js/jquery.min.js"></script>
<script src="https://blog.gc2.at/js/jquerymigrate.js"></script>
<script src="https://blog.gc2.at/js/production.min.js?v=1749285579"></script>

</body>
</html>
