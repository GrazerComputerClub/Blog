<!DOCTYPE html>
<html lang="de-de">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://grazercomputerclub.github.io/Blog"
        },
        "articleSection" : "post",
        "name" : "Lego Roboter &#43; Raspberry Pi",
        "headline" : "Lego Roboter &#43; Raspberry Pi",
        "description" : "<p>&ldquo;Lego Roboter mit der Raspberry Pi zum Leben erwecken - mit <a href="https://www.dexterindustries.com/brickpi/">BrickPi</a>.&rdquo;
Das von Dexter Industries angebotene Erweiterungspaket erlaubt es eure Lego Mindstorms NXT oder EV3 Motoren und Sensoren über eine Raspberry zu steuern.
</p>",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2018",
        "datePublished": "2018-12-22 00:00:00 &#43;0000 UTC",
        "dateModified" : "2018-12-22 00:00:00 &#43;0000 UTC",
        "url" : "https://grazercomputerclub.github.io/Blog/post/robot-arm/",
        "wordCount" : "588",
        "image" : https://grazercomputerclub.github.io/Blogimg/brickPi_explorer.jpg",
        "keywords" : [ "Blog" ]   
    }
    </script>


 <title>Lego Roboter &#43; Raspberry Pi </title>


<meta name="description" content="Blog des Grazer Computer Club - GC2" />



<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" id="ct-tracks-google-fonts-css" href="//fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">
<link rel="stylesheet" href="https://grazercomputerclub.github.io/Blog/css/font-awesome.min.css" type='text/css' media='all'>

<link href="https://grazercomputerclub.github.io/Blog/css/style.css" rel="stylesheet" id="theme-stylesheet" type='text/css' media='all'>

<link href="https://grazercomputerclub.github.io/Blog/css/custom.css" rel="stylesheet" type='text/css' media='all'>
<link rel="shortcut icon" href="https://grazercomputerclub.github.io/Blog/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://grazercomputerclub.github.io/Blog/img/favicon.ico" type="image/x-icon">


<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	if (window.sessionStorage) {
		var GA_SESSION_STORAGE_KEY = 'ga:clientId';
		ga('create', 'UA-130665257-1', {
	    'storage': 'none',
	    'clientId': sessionStorage.getItem(GA_SESSION_STORAGE_KEY)
	   });
	   ga(function(tracker) {
	    sessionStorage.setItem(GA_SESSION_STORAGE_KEY, tracker.get('clientId'));
	   });
   }
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>


<body class="post-template-default single single-post single-format-standard ct-body singular singular-post not-front standard">

  <div id="overflow-container" class="overflow-container">
    <a class="skip-content" href="#main">Skip to content</a>
    <header id="site-header" class="site-header" role="banner">
      <div class='top-navigation'>
        <div class='container'>

  <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
    <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fa fa-plus"></i></button>

    <div class="menu">

      <ul id="menu-secondary-items" class="menu-secondary-items">
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/Blog/categories/"></a>
        </li>
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/Blog/categories/allgemein">Allgemein</a>
        </li>
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/Blog/categories/esp8266">ESP8266</a>
        </li>
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/Blog/categories/programmierung">Programmierung</a>
        </li>
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/Blog/categories/raspberry-pi">Raspberry Pi</a>
        </li>
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/Blog/categories/raspberry-pi-zero">Raspberry Pi Zero</a>
        </li>
        

      </ul>

    </div>

  </div>


  <ul class="social-media-icons">


    

    

    
    <li>
      <a href="https://twitter.com/_gc2_" data-animate-hover="pulse" class="twitter" target="_blank">
        <i class="fa fa-twitter-square" title="twitter"></i>
        <span class="screen-reader-text">twitter</span>
      </a>
    </li>
    

    

    
    <li>
      <a href="mailto:blog@gc2.at" data-animate-hover="pulse" class="email">
        <i class="fa fa-envelope" title="email"></i>
        <span class="screen-reader-text">email</span>
      </a>
    </li>
    

    

    


    
    <li>
      <a href="https://github.com/GrazerComputerClub/" data-animate-hover="pulse" class="github" target="_blank">
        <i class="fa fa-github" title="github"></i>
        <span class="screen-reader-text">github</span>
      </a>
    </li>
    


    

    
    <li>
      <a href="https://grazercomputerclub.github.io/Blog/index.xml" data-animate-hover="pulse" class="rss" target="_blank">
        <i class="fa fa-rss" title="rss"></i>
        <span class="screen-reader-text">rss</span>
      </a>
    </li>
    


  </ul></div>

      </div>

      <div class="container">
        <div id="title-info" class="title-info">
  <div id='site-title' class='site-title'>
    
    <a href="/Blog"> GC2 Blog </a>
    </div>
  </div>
  <button id="toggle-navigation" class="toggle-navigation">
    <i class="fa fa-bars"></i>
  </button>

  <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
  <div id="menu-primary" class="menu-container menu-primary" role="navigation">
    
    <p class="site-description">Infos rund um Computer, Programmierung, Elektronik und sonstige Informatik</p>
    

    <div class="menu">
      <ul id="menu-primary-items" class="menu-primary-items">
        
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://grazercomputerclub.github.io/Blog/index.html">Blog (Deutsch)</a>
          
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://grazercomputerclub.github.io/BlogEN/index.html">Blog (English)</a>
          
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://grazercomputerclub.github.io/Blog/impressum/">Impressum</a>
          
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="http://gc2.at">Hauptseite</a>
          
        </li>
        
      </ul>
    </div>

  </div>

      </div>
    </header>

    <div id="main" class="main" role="main">

      
  
  
    
  
  
  <div id="loop-container" class="loop-container">
    
    <div class="post type-post status-publish format-standard has-post-thumbnail hentry category-design tag-design tag-standard-2 tag-tagalicious tag-travel entry full-without-featured odd excerpt-1">

      <div class='featured-image lazy lazy-bg-image'  data-background="https://grazercomputerclub.github.io/Blog/img/brickPi_explorer.jpg">
      </div>
      
        <div class="entry-meta">
          <span class="date">22 December</span>	<span> / </span>

          <span class="author">
            <a href="https://mwallner.net" title="Posts by Manfred Wallner" rel="author">Manfred Wallner</a>
          </span>


          
          <span class="category">
            <span> / </span>

            <a href="/Blog/categories/programmierung">Programmierung</a>
          </span>
          
          <span class="category">
            <span> / </span>

            <a href="/Blog/categories/raspberry-pi">Raspberry Pi</a>
          </span>
          


        </div>
        <div class='entry-header'>
          <h1 class='entry-title'> Lego Roboter &#43; Raspberry Pi</h1>
        </div>
        <div class="entry-container">
          <div class="entry-content">
            <article>
              <p>&ldquo;Lego Roboter mit der Raspberry Pi zum Leben erwecken - mit <a href="https://www.dexterindustries.com/brickpi/">BrickPi</a>.&rdquo;
Das von Dexter Industries angebotene Erweiterungspaket erlaubt es eure Lego Mindstorms NXT oder EV3 Motoren und Sensoren über eine Raspberry zu steuern.
</p>

<h2 id="brickpi">BrickPi</h2>

<p>Um circa. 100€ ist die <a href="https://www.dexterindustries.com/brickpi/">BrickPi</a> Erweiterung für eure Raspberry Pi zu haben. Der Versand dauert ca. 1-2 Wochen (nach meiner Erfahrung). Wenn ihr schon einen Lego-Mindstorms NXT oder EV3 Baukasten Zuhause habt könnt ihr sofort loslegen.</p>

<p>Warum möchte man einen NXT oder EV3 durch eine Raspberry austauschen? - ganz klar: ihr könnt mit einer Raspberry noch einfacher, noch mehr aus euren Kreationen rausholen.
* Webserver / Services zum steuern eurer Roboter - kein Problem!
* Mehrere BrickPis, oder BrickPi mit NXT/RXC koppeln - kein Problem!
* Fernsteuerung über SSH/CLI - Check!</p>

<h2 id="roboter-bauen-fertig-los">Roboter bauen, fertig LOS!</h2>

<p>Auf der <a href="https://www.lego.com/de-de/mindstorms">Lego Mindstorms Website</a> findet ihr etliche Ideen und Bauanleitungen für Einsteiger, Fortgeschrittene bis zu &ldquo;Extrem-Varianten&rdquo; von DIJ-Robotern.</p>

<p>Ich habe mich dazu entschlossen einen Roboter Arm (&ldquo;RobotARM&rdquo;) zu bauen:</p>

<p><img src="../../img/robotARM.jpg" alt="Lego Roboter Arm" /></p>

<p>Für dieses Modell habe ich
* 3 NXT Motoren
* 1 Ultraschall Sensor
* 1 Berührungssensor
* 1 Farbsensor
verwendet.</p>

<p>Die Motoren sind für die Horizontal- und Vertikalbewegung des Greifarmes, sowie für das Schließen bzw. Öffnen der &ldquo;Zange&rdquo; gedacht.
Mit dem Ultraschall-Sensor wird die Distanz zum Objekt in der Zange bestimmt, der Farbsensor kann dazu verwendet werden um die Farbe des zu greifenden Objektes zu bestimmen.
Ein Berührungssensor (Taster) verhindert, dass der Greifarm zu weit nach hinten kippt bzw. dessen Null-Position zu finden.</p>

<h2 id="treiber-raspbian-einrichten">Treiber / Raspbian einrichten</h2>

<p>Wenn man ein Set mit SD-Karte von Dexter Industries gekauft hat ist dieser Schritt nicht notwendig, da die vorbereitete Distribution bereits alle notwendigen Module beinhaltet.</p>

<p>Um eine Standard Raspbian Distribution für BrickPi vorzubereiten genügt es folgende Befehle auszuführen:</p>

<p>(Checkout des <a href="https://github.com/DexterInd/BrickPi">BrickPi-Projektes auf GitHub</a> + Installations-Script ausführen)</p>

<pre><code>git clone https://github.com/DexterInd/BrickPi.git
cd BrickPi/Setup_Files
sudo chmod +x install.sh
sudo ./install.sh
</code></pre>

<h2 id="programmierung">Programmierung</h2>

<p>Es gibt <a href="https://github.com/DexterInd/BrickPi/tree/master/Software">vorbereitete Softwarebibliotheken</a> für C, Python und Scratch.</p>

<p>Für die Software des &ldquo;RobotARM&rdquo; habe ich mich dazu entschieden, diesen in zu schreiben.</p>

<p>Als erstes müsst ihr die benötigten &ldquo;Treiber&rdquo; für euer Projekt auswählen:</p>

<pre><code>git clone https://github.com/DexterInd/BrickPi.git
cp BrickPi/Software/BrickPi_C/Drivers/ RobotArm/ -r
cd RobotArm/
</code></pre>

<p>Die C-Bibliothek kommt in Fom von zwei Dateien - &ldquo;BrickPi.h&rdquo; und &ldquo;tick.h&rdquo;</p>

<pre><code>[mw@mwmaster RobotArm]$ ll
insgesamt 36K
drwxr-xr-x  2 mw mw 4,0K 22. Dez 16:51 ./
drwxr-xr-x 27 mw mw 4,0K 22. Dez 16:51 ../
-rw-r--r--  1 mw mw  24K 22. Dez 16:51 BrickPi.h
-rw-r--r--  1 mw mw 1,1K 22. Dez 16:51 tick.h
</code></pre>

<p>Diese müssen in euren Programm inkludiert werden.</p>

<p>Für die C-Bibliothek gibt es <a href="https://github.com/DexterInd/BrickPi/tree/master/Software/BrickPi_C/Project_Examples">ein einfaches Beispiel</a>, um sich mit der Funktionsweise der bereitgestellten API vertraut zu machen.</p>

<p>Euer Programm muss keiner bestimmen Form entsprechen, es sind jedoch einige Funktionsaufrufe in die BrickPi-Bibliothek (siehe BrickPi.h) notwendig, um die Hardware zu initialisieren.</p>

<p>Am besten man kapselt diese in Hilfsfunktionen, damit die Program-Main übersichtlicher bleibt:</p>

<pre><code>void SetUARTAtmegaPorts() {
    //http://www.dexterindustries.com/forum/?topic=programming-in-c-2/#post-1078
    BrickPi.Address[0] = 1; // UART AtMega 328P Address (needed by BrickPi)
    BrickPi.Address[1] = 2; // UART AtMega 328P Address (needed by BrickPi)
}

void DeviceConfig() {
    wiringPiSetup();
    SetUARTAtmegaPorts();
    BrickPi.MotorEnable[MOTOR_ROTATE]   = TYPE_MOTOR_SPEED;
    BrickPi.MotorEnable[MOTOR_TILT]     = TYPE_MOTOR_SPEED;
    BrickPi.MotorEnable[MOTOR_GRAB]     = TYPE_MOTOR_SPEED;
    BrickPi.Timeout = ROBOTARM_DEFAULT_TIMEOUT;
    BrickPiSetTimeout();

    BrickPi.SensorType[SENSOR_ULTRASONIC]   = TYPE_SENSOR_ULTRASONIC_CONT;
    BrickPi.SensorType[SENSOR_TOUCH]        = TYPE_SENSOR_TOUCH;
    BrickPi.SensorType[SENSOR_LIGHT]        = TYPE_SENSOR_LIGHT_ON;
}
</code></pre>

<p>Damit bleibt die Hauptfunktion relativ gut lesbar:</p>

<pre><code>int main(int argc, char *argv[]) {
    printf(&quot; - RobotARM -\n&quot;);
    ClearTick();
    int setupResult = BrickPiSetup();
    if (setupResult) {
        printf(&quot;ERROR! - failed to initialize BrickPi! (%d)\n&quot;, setupResult);
        return setupResult;
    }
    DeviceConfig();
    setupResult = BrickPiSetupSensors();
    if (setupResult) {
        printf(&quot;ERROR! - failed to setup sensors! (%d)\n&quot;, setupResult);
        return setupResult;
    }
    printf(&quot; robot starting...\n\n&quot;);
    return RobotMain();
}
</code></pre>

<p>Den kompletten Code für den RobotARM könnt ihr <a href="https://gist.github.com/mwallner/36dddb1828515e71f16f2f6d49020fd9">hier</a> beziehen.</p>
            </article>
          </div>
          
      <div class='entry-meta-bottom'>
        

  <div class="entry-categories"><p><span>Categories</span>
    
    <a href="/Blog/categories/programmierung" title="View all posts in Programmierung">Programmierung</a>
    <a href="/Blog/categories/raspberry-pi" title="View all posts in Raspberry Pi">Raspberry Pi</a>
  </p>
</div>



<div class="entry-tags"><p><span>Tags</span>
  

</p></div>	</div>

	
<div class="author-meta">

  <div class="author">
    	
    <img alt='Manfred Wallner' src="https://www.gravatar.com/avatar/9f40c204e0a9e251e5ba9e1cf8e5cd11?s=100&d=identicon" class='avatar avatar-72 photo' height='72' width='72'>
    
    <span>
      Written by:<a href="https://mwallner.net" title="Posts by Manfred Wallner" rel="author">Manfred Wallner</a> </span>
    </div>
    <div class="bio">
      
      
      <p>Softwareentwickler und PowerShell Evangelist.</p>
        
      
	
      

    


  
  <a class="twitter" target="_blank"
  href="https://twitter.com/schusterfredl">
  <i class="fa fa-twitter-square"
  title="twitter icon"></i>
</a>




<a class="email" target="_blank"
href="mailto:manfred.wallner@gc2.at">
<i class="fa fa-envelope"
title="email icon"></i>
</a>







<a class="github" target="_blank"
href="https://github.com/mwallner">
<i class="fa fa-github"
title="github icon"></i>
</a>









</div>
</div>

</div>
</div>

<section id="comments" class="comments">
  

  




</section>
</div>

 



    </div>

    <footer id="site-footer" class="site-footer" role="contentinfo">
	<h1>
    
    <a href=""> GC2 Blog </a>
    
	</h1>

			
			<p class="site-description">Infos rund um Computer, Programmierung, Elektronik und sonstige Informatik</p>
			

		<div id="menu-footer" class="menu-container menu-footer" role="navigation">
		<div class="menu">

      <ul id="menu-footer-items" class="menu-footer-items">
        
</ul>

</div>	</div>

<ul class="social-media-icons">

        

        


        
        <li>
        <a href="https://twitter.com/_gc2_"  class="twitter" target="_blank">
            <i class="fa fa-twitter-square" title="twitter"></i>
            <span class="screen-reader-text">twitter</span>
        </a>
        </li>
        

        

        
        <li>
        <a href="mailto:blog@gc2.at"  class="email">
            <i class="fa fa-envelope" title="email"></i>
            <span class="screen-reader-text">email</span>
        </a>
        </li>
        

        

        


        
        <li>
        <a href="https://github.com/GrazerComputerClub/"  class="github" target="_blank">
            <i class="fa fa-github" title="github"></i>
            <span class="screen-reader-text">github</span>
        </a>
        </li>
        


        

        
        <li>
        <a href="https://grazercomputerclub.github.io/Blog/index.xml" data-animate-hover="pulse" class="rss" target="_blank">
            <i class="fa fa-rss" title="rss"></i>
            <span class="screen-reader-text">rss</span>
        </a>
        </li>
        

				</ul>	<div class="design-credit">
		
		<p>CC-BY-4.0 <a href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></p>
		
		<p>2018, Grazer Computer Club e. V.</p>
		
		<p>Nederburg Hugo Theme by <a href="https://appernetic.io">Appernetic</a>.</p>
		
	</div>
</footer>

  </div>
  <script src="https://grazercomputerclub.github.io/Blog/js/jquery.min.js"></script>
<script src="https://grazercomputerclub.github.io/Blog/js/jquerymigrate.js"></script>
<script src="https://grazercomputerclub.github.io/Blog/js/production.min.js"></script>

</body>
</html>
