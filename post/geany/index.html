<!DOCTYPE html>
<html lang="de-de">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https:\/\/blog.gc2.at\/"
        },
        "articleSection" : "post",
        "name" : "Geany mit GTK2",
        "headline" : "Geany mit GTK2",
        "description" : "\u003cp\u003eAb Debian 10 Buster wird Geany mit GTK3 bereitgestellt. Deshalb kann es sinnvoll sein, die alte Version mit GTK2 auf der langsamen Raspberry Pi Zero zu installieren.\u003c\/p\u003e",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2019",
        "datePublished": "2019-11-30 00:00:00 \u002b0000 UTC",
        "dateModified" : "2019-11-30 00:00:00 \u002b0000 UTC",
        "url" : "https:\/\/blog.gc2.at\/post\/geany\/",
        "wordCount" : "705",
        "image" : "https:\/\/blog.gc2.at\/img\/geany.png",
        "keywords" : [ "Blog" ]   
    }
    </script>


 <title>Geany mit GTK2 </title>


<meta name="description" content="Blog des Grazer Computer Club - GC2" />



<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" id="ct-tracks-google-fonts-css" href="https://fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

<link href="https://blog.gc2.at/css/style.css?v=1749285579" rel="stylesheet" id="theme-stylesheet" type='text/css' media='all'>

<link href="https://blog.gc2.at/css/custom.css?v=1749285579" rel="stylesheet" type='text/css' media='all'>
<link rel="shortcut icon" href="https://blog.gc2.at/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://blog.gc2.at/img/favicon.ico" type="image/x-icon">

</head>


<body class="post-template-default single single-post single-format-standard ct-body singular singular-post not-front standard">

  <div id="overflow-container" class="overflow-container">
    <a class="skip-content" href="#main">Skip to content</a>
    <header id="site-header" class="site-header" role="banner">
      <div class='top-navigation'>
        <div class='container'>

  <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
    <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fas fa-plus"></i></button>

    <div class="menu">

      <ul id="menu-secondary-items" class="menu-secondary-items">
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/ccc">ccc</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/gc2">gc2</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/minecraft">minecraft</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/programmierung">programmierung</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/raspberry-pi">raspberry pi</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/raspberry-pi-pico">raspberry pi pico</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/raspberry-pi-zero">raspberry pi zero</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/uc">uc</a>
        </li>
        

      </ul>

    </div>

  </div>


  <ul class="social-media-icons">


    

    

    
    <li>
      <a href="https://twitter.com/_gc2_" data-animate-hover="pulse" class="twitter" target="_blank">
        <i class="fab fa-twitter-square" title="twitter"></i>
        <span class="screen-reader-text">twitter</span>
      </a>
    </li>
    

    

    
    <li>
      <a href="mailto:blog@gc2.at" data-animate-hover="pulse" class="email">
        <i class="fas fa-envelope" title="email"></i>
        <span class="screen-reader-text">email</span>
      </a>
    </li>
    

    

    


    
    <li>
      <a href="https://github.com/GrazerComputerClub/" data-animate-hover="pulse" class="github" target="_blank">
        <i class="fab fa-github" title="github"></i>
        <span class="screen-reader-text">github</span>
      </a>
    </li>
    


    



  </ul></div>

      </div>

      <div class="container">
        <div id="title-info" class="title-info">
  <div id='site-title' class='site-title'>
    
    <a href="/"> GC2 Blog </a>
    </div>
  </div>
  <button id="toggle-navigation" class="toggle-navigation">
    <i class="fas fa-bars"></i>
  </button>

  <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
  <div id="menu-primary" class="menu-container menu-primary" role="navigation">
    
    <p class="site-description">Infos rund um Computer, Programmierung, Elektronik und sonstige Informatik</p>
    

    <div class="menu">
      <ul id="menu-primary-items" class="menu-primary-items">
        
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://blog.gc2.at/index.html">Blog (Deutsch)</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://grazercomputerclub.github.io/BlogEN/index.html">Blog (English)</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://blog.gc2.at/impressum/">Impressum</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="http://gc2.at">Hauptseite</a>
          
        </li>
        
      </ul>
    </div>

  </div>

      </div>
    </header>

    <div id="main" class="main" role="main">

      
  
  
    
  
  
  <div id="loop-container" class="loop-container">
    
    <div class="post type-post status-publish format-standard has-post-thumbnail hentry category-design tag-design tag-standard-2 tag-tagalicious tag-travel entry full-without-featured odd excerpt-1">

      <div class='featured-image lazy lazy-bg-image'  data-background="https://blog.gc2.at/img/geany.png">
      </div>
      
        <div class="entry-meta">
          <span class="date">30 November</span>	<span> / </span>

          <span class="author">
            <a href="http://strohmayers.com" title="Posts von Martin Strohmayer" rel="author">Martin Strohmayer</a>
          </span>


          
          <span class="category">
            <span> / </span>

            <a href="/categories/raspberry-pi-zero">Raspberry Pi Zero</a>
          </span>
          
          <span class="category">
            <span> / </span>

            <a href="/categories/raspberry-pi">Raspberry Pi</a>
          </span>
          


        </div>
        <div class='entry-header'>
          <h1 class='entry-title'> Geany mit GTK2</h1>
        </div>
        <div class="entry-container">
          <div class="entry-content">
            <article>
              <p>Ab Debian 10 Buster wird Geany mit GTK3 bereitgestellt. Deshalb kann es sinnvoll sein, die alte Version mit GTK2 auf der langsamen Raspberry Pi Zero zu installieren.</p>
<h2 id="beschreibung">Beschreibung</h2>
<p>Beim Wechsel von Raspbian mit Basis Debian 9 Stretch auf Raspbian mit Debian 10 Buster gab es auch einen Wechsel bei der Entwicklungsumgebung Geany. Statt der Version 1.29 mit GTK2, wird nun die Version 1.33 mit GTK3 zur Verfügung gestellt. GTK ist eine Bibliothek für die grafische Benutzeroberflächen (GUI) mit der Fenster, Dialog und sonstige Anzeigeelemente erzeugt werden. Leider ist die Performance von GTK3 auf der Raspberry Pi Zero merklich schlechter als bei GTK2. Falls man die alte Version als zusätzliches Programm bereitstellen möchte, hier eine Anleitung.</p>
<h2 id="installation">Installation</h2>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h3 id="geany-133-gtk3">Geany 1.33 GTK3</h3>
<pre tabindex="0"><code>sudo apt-get install geany stterm libvte9 libvte-2.91-0
</code></pre><h3 id="geany-129-gtk2">Geany 1.29 GTK2</h3>
<pre tabindex="0"><code>mkdir geany
cd geany
wget https://raspbian.bio.lmu.de/raspbian/pool/main/g/geany/geany_1.29-1_armhf.deb
sudo apt-get install unp
unp geany_1.29-1_armhf.deb
unp data.tar.xz
sudo cp usr/bin/geany /usr/bin/geany-gtk2
sudo mkdir /usr/lib/arm-linux-gnueabihf/geany-gtk2/
sudo cp -rv usr/lib/arm-linux-gnueabihf/* /usr/lib/arm-linux-gnueabihf/geany-gtk2/
mkdir common
cd common 
wget https://raspbian.bio.lmu.de/raspbian/pool/main/g/geany/geany-common_1.29-1_all.deb
unp geany-common_1.29-1_all.deb
unp data.tar.xz
sudo cp usr/share/geany/geany.gtkrc /usr/share/geany/

sudo apt-get install libfreetype6 libfontconfig1 libgtk2.0-0 libpangoft2-1.0-0
</code></pre><!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h3 id="geany-133-gtk2-erstellen">Geany 1.33 GTK2 erstellen</h3>
<p>Die Geany Version 1.33 mit der GTK2 Bibliothek kann selbst erstellt werden. Dies ist allerdings ein aufwendiger Prozess.
Würde man das resultierende Debian Paket dann installieren wird die GTK3 Version ersetzt. Wir kopieren aber wieder die erzeugten Dateien zusätzlich
auf das Raspbian System.</p>
<p>Zuerst besorgt man sich den Source-Code des Debian Paketes. Dann benötigt man noch alle Abhängigkeiten des Paketes und die GTK2 Development Library.
Nun muss man den Source-Code entpacken. In der Datei &ldquo;debian/rules&rdquo; muss der Parameter &ldquo;&ndash;enable-gtk3&rdquo; entfernt werden. Danach kann das Paket neu erzeugt werden. Nun kopieren wir das neue Programm und die Bibliothekdateien in eine neue Datei bzw. Verzeichnis.</p>
<p>geany-gtk2.patch:</p>
<pre tabindex="0"><code>--- geany-1.33/debian/rules.old	2019-11-27 21:55:31.871256842 +0100
+++ geany-1.33/debian/rules	2019-11-28 22:27:55.832759732 +0100
@@ -10,7 +10,7 @@
 	NOCONFIGURE=1 dh_autoreconf ./autogen.sh
 
 override_dh_auto_configure:
-	dh_auto_configure -- --enable-vte --enable-the-force --enable-gtk3
+	dh_auto_configure -- --enable-vte --enable-the-force 
 	sed -i -r &#39;s,^sys_lib_dlsearch_path_spec=&#34;(.*)$$,sys_lib_dlsearch_path_spec=&#34;/usr/lib /lib \1,&#39; $(CURDIR)/libtool
 
 override_dh_auto_install:
</code></pre><!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<pre tabindex="0"><code>sudo su -c &#34;grep &#39;^deb &#39; /etc/apt/sources.list | sed &#39;s/^deb/deb-src/g&#39; &gt; /etc/apt/sources.list.d/deb-src.list&#34;
sudo apt update
sudo apt install build-essential fakeroot devscripts
sudo apt-get build-dep geany
sudo apt-get install libgtk2.0-dev libgdk-pixbuf2.0-dev libatk1.0-dev libcairo2-dev libgio2.0-cil-dev libfreetype6-dev libpango1.0-dev
mkdir build
cd build
apt-get source geany
patch -p0 -i geany-gtk2.patch
cd geany-1.33
debuild -uc -us -b
sudo cp usr/bin/geany /usr/bin/geany-gtk2
sudo mkdir /usr/lib/arm-linux-gnueabihf/geany-gtk2/
sudo cp -rv usr/lib/arm-linux-gnueabihf/* /usr/lib/arm-linux-gnueabihf/geany-gtk2/
cd ..
</code></pre><h2 id="start">Start</h2>
<p>Bei Aufruf der GTK2 Version muss man den Pfad für die Bibliothek setzen, damit nicht die Version mit GTK3 Bibliothek geladen wird.</p>
<p><strong>Aufruf geany mit GTK2:</strong></p>
<pre tabindex="0"><code>LD_LIBRARY_PATH=/usr/lib/arm-linux-gnueabihf/geany-gtk2/ geany-gtk2
</code></pre><p>Bei einem alias Eintrag können die zwei Version direkt gestartet werden.</p>
<p><strong>Alias für Aufruf &ldquo;~/.bash_aliases&rdquo;:</strong></p>
<pre tabindex="0"><code>alias geany-gtk2=&#34;LD_LIBRARY_PATH=/usr/lib/arm-linux-gnueabihf/geany-gtk2/ geany-gtk2&#34;
alias geany-gtk3=&#34;/usr/bin/geany&#34;
</code></pre><p>Mit dem Aufruf geany kann dann je nach Systemleistung die GTK2 oder GTK3 Version gestartet werden.</p>
<p><strong>Alias für Aufruf &ldquo;~/.profile&rdquo;:</strong></p>
<pre tabindex="0"><code>function geany() { 
	if [ `cat /proc/cpuinfo | grep -e &#34;^processor&#34; | wc -l` = 1 ]; then 
    echo &#34;start geany with GTK 2 (slow single core cpu)&#34; 
		geany-gtk2 &#34;$@&#34;
	else 
		geany-gtk3 &#34;$@&#34;
	fi
}
</code></pre><p>Für einen optischer Vergleich der beiden Versionen siehe Bild (GTK2 Clearlooks Theme links, GTK3 rechts).</p>
<p><img src="../../img/geany_GTK3vsGTK2.png" alt="Vergleich Geany GTK2 (Clearlooks) vs GTK3"></p>
<h2 id="einstellungen">Einstellungen</h2>
<p>Nach der Installation gab es beim Starten eines Programms immer das Problem, dass das Terminal Programm mit dem entwickelten Programm nicht ausgeführt werden konnte.</p>
<p><img src="../../img/geany_Fehler.png" alt="Fehler beim Ausführen"></p>
<p>Das Problem kann gelöst werden indem man den internen Terminal für das Ausführen des Programms benutzt.</p>
<p>Bearbeiten -&gt; Einstellungen bzw. <!-- raw HTML omitted -->Strg<!-- raw HTML omitted -->+<!-- raw HTML omitted -->Alt<!-- raw HTML omitted -->+<!-- raw HTML omitted -->P<!-- raw HTML omitted --> , Reiter Terminal<br>
Die Optionen &ldquo;Führe Programme in der VTE aus&rdquo; und &ldquo;Das Run-Skript nicht benutzen&rdquo; müssen aktiviert werden.</p>
<p><img src="../../img/geany_Einstellungen.png" alt="Einstellungen"></p>
<h2 id="performancevergleich-gtk3-zu-gtk2">Performancevergleich GTK3 zu GTK2</h2>
<p>Folgende Zeit wurde ohne exakte Messung ermittelt und sind deshalb nur als Richtwert zu sehen.</p>
<h3 id="raspberry-pi-zero">Raspberry Pi Zero</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><em>Aktion</em></th>
<th><em>GTK3 (Sek.)</em></th>
<th><em>GTK2 (Sek.)</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Start</td>
<td>8</td>
<td>4</td>
</tr>
<tr>
<td style="text-align:left">Fenster öffnen: Kommandos zum Erstellen konfigurieren</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td style="text-align:left">Fenster öffnen: Einstellungen</td>
<td>7</td>
<td>2</td>
</tr>
<tr>
<td style="text-align:left">Beenden</td>
<td>2</td>
<td>1</td>
</tr>
</tbody>
</table>
<h3 id="raspberry-pi-2">Raspberry Pi 2</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><em>Aktion</em></th>
<th><em>GTK3 (Sek.)</em></th>
<th><em>GTK2 (Sek.)</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Start</td>
<td>4</td>
<td>2</td>
</tr>
<tr>
<td style="text-align:left">Fenster öffnen: Kommandos zum Erstellen konfigurieren</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td style="text-align:left">Fenster öffnen: Einstellungen</td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td style="text-align:left">Beenden</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h1 id="style-für-gtk2-ändern">Style für GTK2 ändern</h1>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Die Optik der alten GTK2 Version schaut in der Standardkonfiguration recht altbacken aus. Ein anderes Theme wie z.B. &ldquo;Clearlooks&rdquo; gibt dem Programm einen modernen Look.</p>
<pre tabindex="0"><code>sudo apt-get install gtk-theme-switch gtk2-engines
gtk-theme-switch2
</code></pre><p>/home/pi/.gtkrc-2.0:</p>
<pre tabindex="0"><code># -- THEME AUTO-WRITTEN BY gtk-theme-switch2 DO NOT EDIT
include &#34;/usr/share/themes/Clearlooks/gtk-2.0/gtkrc&#34;

include &#34;/home/pi/.gtkrc-2.0.mine&#34;

# -- THEME AUTO-WRITTEN BY gtk-theme-switch2 DO NOT EDIT
</code></pre><!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="youtube-video-review">Youtube Video Review</h2>
<p><a href="https://www.youtube.com/watch?v=NLOSguwMeAI"><img src="http://img.youtube.com/vi/NLOSguwMeAI/0.jpg" alt="Geany GTK2 vs GTK3 @ Raspberry Pi Zero"></a></p>
            </article>
          </div>
          
      <div class='entry-meta-bottom'>
        

  
    <div class="entry-categories"><p><span>Kategorien</span>
  
    
    <a href="/categories/raspberry-pi-zero" title="View all posts in Raspberry Pi Zero">Raspberry Pi Zero</a>
    <a href="/categories/raspberry-pi" title="View all posts in Raspberry Pi">Raspberry Pi</a>
  </p>
</div>



<div class="entry-tags"><p><span>Tags</span>
  

</p></div>	</div>

	
<div class="author-meta">

  <div class="author">
    	
    <img alt='Martin Strohmayer' src="https://www.gravatar.com/avatar/dc376a825706457b68caa281714897d5?s=100&d=identicon" class='avatar avatar-72 photo' height='72' width='72'>
    
    <span>
      Geschrieben von:<a href="http://strohmayers.com" title="Posts von Martin Strohmayer" rel="author">Martin Strohmayer</a> </span>
    </div>
    <div class="bio">
      
      
      <p>Softwareentwickler und Raspberry Pi Enthusiast.</p>
        
      
	
      

    


  
  <a class="twitter" target="_blank"
  href="https://twitter.com/m_stroh">
  <i class="fab fa-twitter-square"
  title="twitter icon"></i>
</a>




<a class="email" target="_blank"
href="mailto:martin.strohmayer@gc2.at">
<i class="fas fa-envelope"
title="email icon"></i>
</a>







<a class="github" target="_blank"
href="https://github.com/mstroh76">
<i class="fab fa-github"
title="github icon"></i>
</a>









</div>
</div>

</div>
</div>

<section id="comments" class="comments">




<script src="https://utteranc.es/client.js"
        repo="GrazerComputerClub/Blog"
        issue-term="title"
        
        theme="github-light"
        
        crossorigin="anonymous"
        async>
</script>


  

  




</section>
</div>

 



    </div>

    
<footer id="site-footer" class="site-footer" role="contentinfo">
	<h1>
    
    <a href=""> GC2 Blog </a>
    
	</h1>

			
			<p class="site-description">Infos rund um Computer, Programmierung, Elektronik und sonstige Informatik</p>
			

		<div id="menu-footer" class="menu-container menu-footer" role="navigation">
		<div class="menu">

      <ul id="menu-footer-items" class="menu-footer-items">
        
</ul>

</div>	</div>

<ul class="social-media-icons">

        

        


        
        <li>
        <a href="https://twitter.com/_gc2_"  class="twitter" target="_blank">
            <i class="fab fa-twitter-square" title="twitter"></i>
            <span class="screen-reader-text">twitter</span>
        </a>
        </li>
        

        

        
        <li>
        <a href="mailto:blog@gc2.at"  class="email">
            <i class="fas fa-envelope" title="email"></i>
            <span class="screen-reader-text">email</span>
        </a>
        </li>
        

        

        


        
        <li>
        <a href="https://github.com/GrazerComputerClub/"  class="github" target="_blank">
            <i class="fab fa-github" title="github"></i>
            <span class="screen-reader-text">github</span>
        </a>
        </li>
        


        

				</ul>	<div class="design-credit">
		
		<p>CC-BY-4.0 <a href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></p>
		
		<p>2022, Grazer Computer Club e. V.</p>
		
		<p>Nederburg Hugo Theme by <a href="https://appernetic.io">Appernetic</a>.</p>
		
	</div>
</footer>

  </div>
  <script src="https://blog.gc2.at/js/jquery.min.js"></script>
<script src="https://blog.gc2.at/js/jquerymigrate.js"></script>
<script src="https://blog.gc2.at/js/production.min.js?v=1749285579"></script>

</body>
</html>
