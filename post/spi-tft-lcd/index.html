<!DOCTYPE html>
<html lang="de-de">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://blog.gc2.at"
        },
        "articleSection" : "post",
        "name" : "SPI TFT LCD - Teil 1",
        "headline" : "SPI TFT LCD - Teil 1",
        "description" : "<p>Für eine Anzeige abseits von HDMI und Composite bieten sich günstige SPI TFT LCDs an. Diese gibt es in unterschiedlichen Auflösungen und Größen. Die Einbindung ist über ein Kernelmodul problemlos möglich.<br />
</p>",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2018",
        "datePublished": "2018-12-12 00:00:00 &#43;0000 UTC",
        "dateModified" : "2018-12-12 00:00:00 &#43;0000 UTC",
        "url" : "https://blog.gc2.at/post/spi-tft-lcd/",
        "wordCount" : "625",
        "image" : https://blog.gc2.atimg/SPI-LCD-TFT.jpg",
        "keywords" : [ "Blog" ]   
    }
    </script>


 <title>SPI TFT LCD - Teil 1 </title>


<meta name="description" content="Blog des Grazer Computer Club - GC2" />



<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" id="ct-tracks-google-fonts-css" href="https://fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

<link href="https://blog.gc2.at/css/style.css?v=1577398080" rel="stylesheet" id="theme-stylesheet" type='text/css' media='all'>

<link href="https://blog.gc2.at/css/custom.css?v=1577398080" rel="stylesheet" type='text/css' media='all'>
<link rel="shortcut icon" href="https://blog.gc2.at/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://blog.gc2.at/img/favicon.ico" type="image/x-icon">


<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	if (window.sessionStorage) {
		var GA_SESSION_STORAGE_KEY = 'ga:clientId';
		ga('create', 'UA-130665257-1', {
	    'storage': 'none',
	    'clientId': sessionStorage.getItem(GA_SESSION_STORAGE_KEY)
	   });
	   ga(function(tracker) {
	    sessionStorage.setItem(GA_SESSION_STORAGE_KEY, tracker.get('clientId'));
	   });
   }
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>


<body class="post-template-default single single-post single-format-standard ct-body singular singular-post not-front standard">

  <div id="overflow-container" class="overflow-container">
    <a class="skip-content" href="#main">Skip to content</a>
    <header id="site-header" class="site-header" role="banner">
      <div class='top-navigation'>
        <div class='container'>

  <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
    <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fas fa-plus"></i></button>

    <div class="menu">

      <ul id="menu-secondary-items" class="menu-secondary-items">
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/"></a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/atmega">ATmega</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/ccc">CCC</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/esp8266">ESP8266</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/gc2">GC2</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/programmierung">Programmierung</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/raspberry-pi">Raspberry Pi</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/raspberry-pi-zero">Raspberry Pi Zero</a>
        </li>
        

      </ul>

    </div>

  </div>


  <ul class="social-media-icons">


    

    

    
    <li>
      <a href="https://twitter.com/_gc2_" data-animate-hover="pulse" class="twitter" target="_blank">
        <i class="fab fa-twitter-square" title="twitter"></i>
        <span class="screen-reader-text">twitter</span>
      </a>
    </li>
    

    

    
    <li>
      <a href="mailto:blog@gc2.at" data-animate-hover="pulse" class="email">
        <i class="fas fa-envelope" title="email"></i>
        <span class="screen-reader-text">email</span>
      </a>
    </li>
    

    

    


    
    <li>
      <a href="https://github.com/GrazerComputerClub/" data-animate-hover="pulse" class="github" target="_blank">
        <i class="fab fa-github" title="github"></i>
        <span class="screen-reader-text">github</span>
      </a>
    </li>
    


    

    
    <li>
      <a href="https://blog.gc2.at/index.xml" data-animate-hover="pulse" class="rss" target="_blank">
        <i class="fas fa-rss" title="rss"></i>
        <span class="screen-reader-text">rss</span>
      </a>
    </li>
    


  </ul></div>

      </div>

      <div class="container">
        <div id="title-info" class="title-info">
  <div id='site-title' class='site-title'>
    
    <a href="/"> GC2 Blog </a>
    </div>
  </div>
  <button id="toggle-navigation" class="toggle-navigation">
    <i class="fas fa-bars"></i>
  </button>

  <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
  <div id="menu-primary" class="menu-container menu-primary" role="navigation">
    
    <p class="site-description">Infos rund um Computer, Programmierung, Elektronik und sonstige Informatik</p>
    

    <div class="menu">
      <ul id="menu-primary-items" class="menu-primary-items">
        
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://blog.gc2.at/index.html">Blog (Deutsch)</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://grazercomputerclub.github.io/BlogEN/index.html">Blog (English)</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://blog.gc2.at/impressum/">Impressum</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="http://gc2.at">Hauptseite</a>
          
        </li>
        
      </ul>
    </div>

  </div>

      </div>
    </header>

    <div id="main" class="main" role="main">

      
  
  
    
  
  
  <div id="loop-container" class="loop-container">
    
    <div class="post type-post status-publish format-standard has-post-thumbnail hentry category-design tag-design tag-standard-2 tag-tagalicious tag-travel entry full-without-featured odd excerpt-1">

      <div class='featured-image lazy lazy-bg-image'  data-background="https://blog.gc2.at/img/SPI-LCD-TFT.jpg">
      </div>
      
        <div class="entry-meta">
          <span class="date">12 December</span>	<span> / </span>

          <span class="author">
            <a href="http://strohmayers.com" title="Posts von Martin Strohmayer" rel="author">Martin Strohmayer</a>
          </span>


          
          <span class="category">
            <span> / </span>

            <a href="/categories/raspberry-pi">Raspberry Pi</a>
          </span>
          


        </div>
        <div class='entry-header'>
          <h1 class='entry-title'> SPI TFT LCD - Teil 1</h1>
        </div>
        <div class="entry-container">
          <div class="entry-content">
            <article>
              <p>Für eine Anzeige abseits von HDMI und Composite bieten sich günstige SPI TFT LCDs an. Diese gibt es in unterschiedlichen Auflösungen und Größen. Die Einbindung ist über ein Kernelmodul problemlos möglich.<br />
</p>

<h2 id="allgemeines">Allgemeines</h2>

<p>SPI-Displays sind TFT-LCD-Anzeigen, die über den SPI-Bus an den Raspberry Pi angeschlossen werden können. Sie werden in unterschiedlichsten Auflösungen (128x128, 160x128, 320x240 usw.) und Größen (1,44“ - 2,8“ usw.) angeboten. Es gibt allerdings verschiedenste Kontroller für diese SPI-Displays, die unterschiedlich angesprochen werden. Die Einbindung kann über eine Library und ein Programm erfolgen. Flexibler und einfacher ist allerdings die Einbindung in das Linux-System bzw. in den Kernel. Dazu benötigt man ein Kernel-Modul, das den Kontrolle des Displays unterstützt. Eine Viehlzahl von diesen Display bzw. Displaykontrollern wird vom Modul &lsquo;fbtft_device&rsquo; unterstützt.
Nach dem Laden wird ein zweiter Framebuffer &lsquo;/dev/fb1&rsquo; für das Display erzeugt. &lsquo;/dev/fb0&rsquo; ist dabei der Framebuffer des Grafikkarte (also des HDMI- oder Composite-Ausgangs).</p>

<p>Günstige SPI-Displays mit einem unterstützten Kontroller sind z. B.:</p>

<table>
<thead>
<tr>
<th>Kontroller</th>
<th align="center">Auflösung</th>
<th align="center">Größe</th>
<th align="center">ca. Preis China</th>
</tr>
</thead>

<tbody>
<tr>
<td>ST7735 (adafruit18)</td>
<td align="center">128x128</td>
<td align="center">1,44&rdquo;</td>
<td align="center">3 €</td>
</tr>

<tr>
<td>ST7735 (sainsmart18)</td>
<td align="center">160x128</td>
<td align="center">1,8&rdquo;</td>
<td align="center">4 €</td>
</tr>

<tr>
<td>ILI9341</td>
<td align="center">320x240</td>
<td align="center">2,2-2,8&rdquo;</td>
<td align="center">8 €</td>
</tr>
</tbody>
</table>

<p>Ein Problem stellt die Framerate dar, weil der SPI-Bus des Controllers nur eine limitierte Übertagungsrate unterstützt. Bei den kleinen Displays sind dann durchaus 30 FPS (Bilder pro Sekunde) möglich. Bei 320x240 sind bei der Raspberry Pi Zero allerdings nur 10-20 FPS möglich.<br />
Die theoretische minimale nötige Übertragungsrate bzw. SPI-Taktfrequenz kann man sich für 25 FPS und 16 Bit Farben leicht berechnen. Bei einer Auflösung von 160x128 ergibt sich eine Übertragungsrate von min. 8 MBit/s (8 MHz). Bei 320x240 allerdings bereits 41 MBit/s (41 MHz).<br />
Im Test lag die maximale SPI-Taktfrequenz des ST7735-Controllers bei 64 MHz und beim ILI9341-Controller bei 82 MHz.</p>

<h2 id="kontakte">Kontakte</h2>

<p>Zur Ansteuerung des Displays werden folgende Kontakte bzw. GPIOs verwendet:<br />
<strong>VCC</strong> &hellip; Versorgung (meist 5 oder 3,3 V)<br />
<strong>VLED</strong> &hellip; Versorgung Hintergrundbeleuchtung (optional, meist 3,3 V)<br />
<strong>GND</strong> &hellip; Masse<br />
<strong>MOSI</strong> &hellip; Datenleitung<br />
<strong>CLK</strong> &hellip; SPI-Takt<br />
<strong>CS</strong> &hellip; SPI Slave Aktivierung<br />
<strong>RESET</strong> &hellip; Reset<br />
<strong>DC/A0/RS</strong> &hellip; Umschaltung Befehl oder Daten Übertagung</p>

<p>Die Kontakte CS, RESET und DC/A0/RS können über Kernel Parameter frei zugewiesen werden. Wobei CS typischerweise auf CS0 gesetzt wird. RESET wird auf GPIO25 und DC/A0/RS auf GPIO24. MOSI und CLK werden auf die entsprechenden SPI-Bus Anschlüsse verbunden.</p>

<p><img src="../../img/SPI-LCD-TFT_Steckplatine.png" alt="SPI-LCD-TFT Anschluss" /></p>

<h2 id="einbindung-aktivierung">Einbindung / Aktivierung</h2>

<p>Das Kernel Modul &lsquo;fbtft_device&rsquo; unterstützt viele Parameter:<br />
<strong>name</strong> &hellip; Namen des Displays (dahinter ist der Controller, Auflösung und weitere Parameter hinterlegt)<br />
<strong>gpios</strong> &hellip; gibt die GPIO-Nummer (BCM) für die angegebenen Anschlusse an (reset, dc, cs)<br />
<strong>rotate</strong> &hellip; Drehung des Displays<br />
<strong>speed</strong> &hellip; SPI-Takt<br />
<strong>fps</strong> &hellip; Bilder pro Sekunde (wird möglicherweise nicht erreicht)<br />
<strong>debug</strong> &hellip; Debugmodus, (Wert 32 bzw. $((1&lt;&lt;5)) protokolliert erreichte FPS, daher nur für kurze Tests aktivieren!)</p>

<p>Mit folgenden Anruf können alle unterstützen Displays aufgelistet werden
<code>sudo modprobe fbtft_device name=list; dmesg | tail -30</code></p>

<p>adafruit18
adafruit18_green
adafruit22
adafruit22a
adafruit28
adafruit13m
admatec_c-berry28
agm1264k-fl
dogs102
er_tftm050_2
er_tftm070_5
ew24ha0
ew24ha0_9bit
flexfb
flexpfb
freetronicsoled128
hx8353d
hy28a
hy28b
ili9481
itdb24
itdb28
mi0283qt-2
mi0283qt-9a
mi0283qt-v2
nokia3310
nokia3310a
nokia5110
piscreen
pitft
pioled
rpi-display
s6d02a1
sainsmart18
sainsmart32
sainsmart32_fast
sainsmart32_latched
sainsmart32_spi
spidev
ssd1331
tinylcd35
tm022hdh26
tontec35_9481
tontec35_9486
upd161704
waveshare32b
waveshare22</p>

<h3 id="tft-lcd-sainsmart18-st7735-160x128-1-8">TFT-LCD sainsmart18 (ST7735, 160x128, 1,8“)</h3>

<p>Konsole Beispielaufruf:<br />
<code>sudo modprobe fbtft_device name=sainsmart18 gpios=reset:25,dc:24,cs:8 rotate=90 fps=30 speed=48000000 debug=$((1&lt;&lt;5))</code></p>

<p>Einbindung für automatische Aktivierung bei Systemstart:</p>

<p>&rdquo;/etc/modules-load.d/fbtft.conf&rdquo;:</p>

<pre><code>spi-bcm2835
fbtft dma
fbtft_device
</code></pre>

<p>&rdquo;/etc/modprobe.d/fbtft.conf&rdquo;:</p>

<pre><code>options fbtft_device name=sainsmart18 gpios=reset:25,dc:24,cs:8 rotate=90 fps=30 speed=48000000
</code></pre>

<h3 id="tft-lcd-adafruit18-st7735-128x128-1-44">TFT-LCD adafruit18 (ST7735, 128x128, 1,44“)</h3>

<p>Konsole Beispielaufruf:<br />
<code>sudo modprobe fbtft_device name=adafruit18_green gpios=reset:25,dc:24,cs:8 rotate=90 fps=30 bgr=1 speed=40000000 debug=$((1&lt;&lt;5))</code></p>

<p>&rdquo;/etc/modules-load.d/fbtft.conf&rdquo;:</p>

<pre><code>spi-bcm2835
fbtft dma
fbtft_device
</code></pre>

<p>&rdquo;/etc/modprobe.d/fbtft.conf&rdquo;:</p>

<pre><code>options fbtft_device name=adafruit18_green gpios=reset:25,dc:24,cs:8 speed=40000000 bgr=1 fps=30 height=128 width=128 rotate=90
</code></pre>

<h3 id="tft-lcd-waveshare-st7735-128x128-1-44">TFT-LCD WaveShare (ST7735, 128x128, 1,44“)</h3>

<p>Konsole Beispielaufruf:<br />
<code>sudo modprobe fbtft_device name=adafruit18_green gpios=reset:27,dc:25,cs:8,led:24 height=128 width=128 rotate=180 fps=30 bgr=1 speed=40000000 debug=$((1&lt;&lt;5))</code></p>

<p>&rdquo;/etc/modules-load.d/fbtft.conf&rdquo;:</p>

<pre><code>spi-bcm2835
fbtft dma
fbtft_device
</code></pre>

<p>&rdquo;/etc/modprobe.d/fbtft.conf&rdquo;:</p>

<pre><code>options fbtft_device name=adafruit18_green gpios=reset:27,dc:25,cs:8,led:24 height=128 width=128 rotate=180 fps=30 bgr=1 speed=40000000
</code></pre>

<h2 id="verwendung">Verwendung</h2>

<p>Die Verwendung wird in einem eigenen Eintrag besprochen &hellip;</p>

<h2 id="verlinkungen">Verlinkungen</h2>

<p>Alle relevanten Informationen werden auf der Projektseite
<a href="https://github.com/notro/fbtft/wiki/fbtft_device">https://github.com/notro/fbtft/wiki/fbtft_device</a> beschrieben.</p>
            </article>
          </div>
          
      <div class='entry-meta-bottom'>
        

  
    <div class="entry-categories"><p><span>Kategorie</span>
  
    
    <a href="/categories/raspberry-pi" title="View all posts in Raspberry Pi">Raspberry Pi</a>
  </p>
</div>



<div class="entry-tags"><p><span>Tags</span>
  

</p></div>	</div>

	
<div class="author-meta">

  <div class="author">
    	
    <img alt='Martin Strohmayer' src="https://www.gravatar.com/avatar/dc376a825706457b68caa281714897d5?s=100&d=identicon" class='avatar avatar-72 photo' height='72' width='72'>
    
    <span>
      Geschrieben von:<a href="http://strohmayers.com" title="Posts von Martin Strohmayer" rel="author">Martin Strohmayer</a> </span>
    </div>
    <div class="bio">
      
      
      <p>Softwareentwickler und Raspberry Pi Enthusiast.</p>
        
      
	
      

    


  
  <a class="twitter" target="_blank"
  href="https://twitter.com/m_stroh">
  <i class="fab fa-twitter-square"
  title="twitter icon"></i>
</a>




<a class="email" target="_blank"
href="mailto:martin.strohmayer@gc2.at">
<i class="fas fa-envelope"
title="email icon"></i>
</a>







<a class="github" target="_blank"
href="https://github.com/mstroh76">
<i class="fab fa-github"
title="github icon"></i>
</a>









</div>
</div>

</div>
</div>

<section id="comments" class="comments">




<script src="https://utteranc.es/client.js"
        repo="GrazerComputerClub/Blog"
        issue-term="title"
        
        theme="github-light"
        
        crossorigin="anonymous"
        async>
</script>


  

  




</section>
</div>

 



    </div>

    
<footer id="site-footer" class="site-footer" role="contentinfo">
	<h1>
    
    <a href=""> GC2 Blog </a>
    
	</h1>

			
			<p class="site-description">Infos rund um Computer, Programmierung, Elektronik und sonstige Informatik</p>
			

		<div id="menu-footer" class="menu-container menu-footer" role="navigation">
		<div class="menu">

      <ul id="menu-footer-items" class="menu-footer-items">
        
</ul>

</div>	</div>

<ul class="social-media-icons">

        

        


        
        <li>
        <a href="https://twitter.com/_gc2_"  class="twitter" target="_blank">
            <i class="fab fa-twitter-square" title="twitter"></i>
            <span class="screen-reader-text">twitter</span>
        </a>
        </li>
        

        

        
        <li>
        <a href="mailto:blog@gc2.at"  class="email">
            <i class="fas fa-envelope" title="email"></i>
            <span class="screen-reader-text">email</span>
        </a>
        </li>
        

        

        


        
        <li>
        <a href="https://github.com/GrazerComputerClub/"  class="github" target="_blank">
            <i class="fab fa-github" title="github"></i>
            <span class="screen-reader-text">github</span>
        </a>
        </li>
        


        

        
        <li>
        <a href="https://blog.gc2.at/index.xml" data-animate-hover="pulse" class="rss" target="_blank">
            <i class="fas fa-rss" title="rss"></i>
            <span class="screen-reader-text">rss</span>
        </a>
        </li>
        

				</ul>	<div class="design-credit">
		
		<p>CC-BY-4.0 <a href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></p>
		
		<p>2018, Grazer Computer Club e. V.</p>
		
		<p>Nederburg Hugo Theme by <a href="https://appernetic.io">Appernetic</a>.</p>
		
	</div>
</footer>

  </div>
  <script src="https://blog.gc2.at/js/jquery.min.js"></script>
<script src="https://blog.gc2.at/js/jquerymigrate.js"></script>
<script src="https://blog.gc2.at/js/production.min.js?v=1577398080"></script>

</body>
</html>
