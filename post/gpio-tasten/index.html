<!DOCTYPE html>
<html lang="de-de">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https:\/\/blog.gc2.at"
        },
        "articleSection" : "post",
        "name" : "GPIO-Eingang zur Tastaturtaste",
        "headline" : "GPIO-Eingang zur Tastaturtaste",
        "description" : "\x3cp\x3eOft sollen über eine Taste am GPIO-Eingang ein Programm gesteuert werden. Früher musste man das kompliziert mit einem eigenen Programm oder zusätzlicher Hardware realisieren. Doch nun geht das ganz einfach, über Device Tree. Mit nur einem Eintrag in der Konfigurationsdatei \x26ldquo;config.txt\x26rdquo; wird ein GPIO-Eingang einer Tastatur-Taste zugewiesen.\x3c\/p\x3e",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2018",
        "datePublished": "2018-12-10 00:00:00 \x2b0000 UTC",
        "dateModified" : "2018-12-10 00:00:00 \x2b0000 UTC",
        "url" : "https:\/\/blog.gc2.at\/post\/gpio-tasten\/",
        "wordCount" : "314",
        "image" : "https://blog.gc2.atimg/keys_white_nav.jpg"",
        "keywords" : [ "Blog" ]   
    }
    </script>


 <title>GPIO-Eingang zur Tastaturtaste </title>


<meta name="description" content="Blog des Grazer Computer Club - GC2" />



<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" id="ct-tracks-google-fonts-css" href="https://fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

<link href="https://blog.gc2.at/css/style.css?v=1642174860" rel="stylesheet" id="theme-stylesheet" type='text/css' media='all'>

<link href="https://blog.gc2.at/css/custom.css?v=1642174860" rel="stylesheet" type='text/css' media='all'>
<link rel="shortcut icon" href="https://blog.gc2.at/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://blog.gc2.at/img/favicon.ico" type="image/x-icon">


<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	if (window.sessionStorage) {
		var GA_SESSION_STORAGE_KEY = 'ga:clientId';
		ga('create', 'UA-130665257-1', {
	    'storage': 'none',
	    'clientId': sessionStorage.getItem(GA_SESSION_STORAGE_KEY)
	   });
	   ga(function(tracker) {
	    sessionStorage.setItem(GA_SESSION_STORAGE_KEY, tracker.get('clientId'));
	   });
   }
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>


<body class="post-template-default single single-post single-format-standard ct-body singular singular-post not-front standard">

  <div id="overflow-container" class="overflow-container">
    <a class="skip-content" href="#main">Skip to content</a>
    <header id="site-header" class="site-header" role="banner">
      <div class='top-navigation'>
        <div class='container'>

  <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
    <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fas fa-plus"></i></button>

    <div class="menu">

      <ul id="menu-secondary-items" class="menu-secondary-items">
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/ccc">ccc</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/gc2">gc2</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/minecraft">minecraft</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/programmierung">programmierung</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/raspberry-pi">raspberry-pi</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/raspberry-pi-zero">raspberry-pi-zero</a>
        </li>
        
        <li class="menu-item menu-item-type-taxonomy menu-item-object-category">
          <a href="/categories/uc">uc</a>
        </li>
        

      </ul>

    </div>

  </div>


  <ul class="social-media-icons">


    

    

    
    <li>
      <a href="https://twitter.com/_gc2_" data-animate-hover="pulse" class="twitter" target="_blank">
        <i class="fab fa-twitter-square" title="twitter"></i>
        <span class="screen-reader-text">twitter</span>
      </a>
    </li>
    

    

    
    <li>
      <a href="mailto:blog@gc2.at" data-animate-hover="pulse" class="email">
        <i class="fas fa-envelope" title="email"></i>
        <span class="screen-reader-text">email</span>
      </a>
    </li>
    

    

    


    
    <li>
      <a href="https://github.com/GrazerComputerClub/" data-animate-hover="pulse" class="github" target="_blank">
        <i class="fab fa-github" title="github"></i>
        <span class="screen-reader-text">github</span>
      </a>
    </li>
    


    

    
    <li>
      <a href="https://blog.gc2.at/index.xml" data-animate-hover="pulse" class="rss" target="_blank">
        <i class="fas fa-rss" title="rss"></i>
        <span class="screen-reader-text">rss</span>
      </a>
    </li>
    


  </ul></div>

      </div>

      <div class="container">
        <div id="title-info" class="title-info">
  <div id='site-title' class='site-title'>
    
    <a href="/"> GC2 Blog </a>
    </div>
  </div>
  <button id="toggle-navigation" class="toggle-navigation">
    <i class="fas fa-bars"></i>
  </button>

  <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
  <div id="menu-primary" class="menu-container menu-primary" role="navigation">
    
    <p class="site-description">Infos rund um Computer, Programmierung, Elektronik und sonstige Informatik</p>
    

    <div class="menu">
      <ul id="menu-primary-items" class="menu-primary-items">
        
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://blog.gc2.at/index.html">Blog (Deutsch)</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://grazercomputerclub.github.io/BlogEN/index.html">Blog (English)</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://blog.gc2.at/impressum/">Impressum</a>
          
        </li>
        
        <li class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="http://gc2.at">Hauptseite</a>
          
        </li>
        
      </ul>
    </div>

  </div>

      </div>
    </header>

    <div id="main" class="main" role="main">

      
  
  
    
  
  
  <div id="loop-container" class="loop-container">
    
    <div class="post type-post status-publish format-standard has-post-thumbnail hentry category-design tag-design tag-standard-2 tag-tagalicious tag-travel entry full-without-featured odd excerpt-1">

      <div class='featured-image lazy lazy-bg-image'  data-background="https://blog.gc2.at/img/keys_white_nav.jpg">
      </div>
      
        <div class="entry-meta">
          <span class="date">10 December</span>	<span> / </span>

          <span class="author">
            <a href="http://strohmayers.com" title="Posts von Martin Strohmayer" rel="author">Martin Strohmayer</a>
          </span>


          
          <span class="category">
            <span> / </span>

            <a href="/categories/raspberry-pi">Raspberry Pi</a>
          </span>
          


        </div>
        <div class='entry-header'>
          <h1 class='entry-title'> GPIO-Eingang zur Tastaturtaste</h1>
        </div>
        <div class="entry-container">
          <div class="entry-content">
            <article>
              <p>Oft sollen über eine Taste am GPIO-Eingang ein Programm gesteuert werden. Früher musste man das kompliziert mit einem eigenen Programm oder zusätzlicher Hardware realisieren. Doch nun geht das ganz einfach, über Device Tree. Mit nur einem Eintrag in der Konfigurationsdatei &ldquo;config.txt&rdquo; wird ein GPIO-Eingang einer Tastatur-Taste zugewiesen.</p>
<h2 id="umsetzung">Umsetzung</h2>
<p>Mithilfe der Device Tree Funktion &lsquo;gpio-key&rsquo; können ganz einfach GPIO-Eingänge zur Simulation eines Tastaturtastendrucks verwendet werden. Man kann so zum Beispiel einem Steuerkreuz die Pfeiltasten Rechts, Links, Oben und Unten zuweisen. Dazu muss man nur angeben welcher GPIO-Eingang welche Taste bzw. Tastencode entspricht. Die Tastencodes können live mit dem Konsolenprogramm &lsquo;showkey&rsquo; ermittelt werden, wenn eine Tastatur angeschlossen ist. Wird 10 Sekunden keine Taste gedrückt, so beendet sich das Programm von selbst.</p>
<table>
<thead>
<tr>
<th>Taste</th>
<th align="center">Scancode</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pfeil oben</td>
<td align="center">103</td>
</tr>
<tr>
<td>Pfeil links</td>
<td align="center">105</td>
</tr>
<tr>
<td>Pfeil rechts</td>
<td align="center">106</td>
</tr>
<tr>
<td>Pfeil unten</td>
<td align="center">108</td>
</tr>
<tr>
<td>Esc</td>
<td align="center">1</td>
</tr>
<tr>
<td>Backspace</td>
<td align="center">14</td>
</tr>
<tr>
<td>Enter</td>
<td align="center">28</td>
</tr>
<tr>
<td>Strg links</td>
<td align="center">29</td>
</tr>
<tr>
<td>Space</td>
<td align="center">57</td>
</tr>
<tr>
<td>a</td>
<td align="center">30</td>
</tr>
<tr>
<td>s</td>
<td align="center">31</td>
</tr>
<tr>
<td>d</td>
<td align="center">32</td>
</tr>
<tr>
<td>w</td>
<td align="center">17</td>
</tr>
<tr>
<td>y</td>
<td align="center">44</td>
</tr>
<tr>
<td>x</td>
<td align="center">45</td>
</tr>
<tr>
<td>c</td>
<td align="center">46</td>
</tr>
<tr>
<td>z</td>
<td align="center">21</td>
</tr>
<tr>
<td>p</td>
<td align="center">28</td>
</tr>
</tbody>
</table>
<p>Alternativ kann auch das Programm &lsquo;dumpkeys&rsquo; mit dem Aufruf <code>sudo dumpkeys -f &gt; dumpkeys.txt</code> verwendet werden um eine ganze (unübersichtliche) Liste zu erstellen.<br>
Eine Liste ist auch im Internet bei den <a href="https://github.com/torvalds/linux/blob/v4.12/include/uapi/linux/input-event-codes.h">Kernel-Sourcen</a> verfügbar.
Hier sind auch einige Spezialtasten bzw. Tasten mit bereits verknüpften Funktionen zu finden.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Scancode</th>
<th align="center">Funktion</th>
</tr>
</thead>
<tbody>
<tr>
<td>KEY_POWER</td>
<td align="center">166</td>
<td align="center">Shutdown</td>
</tr>
<tr>
<td>KEY_RESTART</td>
<td align="center">408</td>
<td align="center"></td>
</tr>
<tr>
<td>KEY_RFKILL</td>
<td align="center">247</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>Folgende Device Tree Einträge weisen beispielsweise den angegeben GPIOs die Pfeiltastenfunktionen zu:</p>
<pre><code>dtoverlay=gpio-key,gpio=16,keycode=103,label=&quot;KEY_UP&quot;,gpio_pull=2
dtoverlay=gpio-key,gpio=26,keycode=105,label=&quot;KEY_LEFT&quot;,gpio_pull=2
dtoverlay=gpio-key,gpio=20,keycode=106,label=&quot;KEY_RIGHT&quot;,gpio_pull=2
dtoverlay=gpio-key,gpio=21,keycode=108,label=&quot;KEY_DOWN&quot;,gpio_pull=2
</code></pre><p>Parameter für gpio-key Overlay:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Funktion</th>
</tr>
</thead>
<tbody>
<tr>
<td>gpio</td>
<td>GPIO-Nummer (BCM)</td>
</tr>
<tr>
<td>keycode</td>
<td>Tastencode</td>
</tr>
<tr>
<td>label</td>
<td>Beliebiger Name</td>
</tr>
<tr>
<td>gpio_pull</td>
<td>Aktivierung Pull-Up/Pull-Down Widerstand; 0 = keiner; 1 = pull-down; 2 = pull-up</td>
</tr>
<tr>
<td>active_low</td>
<td>Logikpegel für Tastendruck; 0 = Active High, Schalter verbindet nach 3,3 V; 1 = Active Low (Standard-Einstellung), Schalter verbindet nach GND</td>
</tr>
</tbody>
</table>
<p>Auf der Kommandozeile kann die Funktion durch folgenden Befehl getestet werden:</p>
<pre><code>sudo dtoverlay gpio-key gpio=19 keycode=28 label=&quot;KEY_ENTER&quot; gpio_pull=2
</code></pre><h2 id="verlinkungen">Verlinkungen</h2>
<p>Weitere Infos bezüglich der Device Tree Funktion ‚gpio-keys‘, erhält man unter <a href="https://www.kernel.org/doc/Documentation/devicetree/bindings/input/gpio-keys.txt">https://www.kernel.org/doc/Documentation/devicetree/bindings/input/gpio-keys.txt</a></p>
            </article>
          </div>
          
      <div class='entry-meta-bottom'>
        

  
    <div class="entry-categories"><p><span>Kategorie</span>
  
    
    <a href="/categories/raspberry-pi" title="View all posts in Raspberry Pi">Raspberry Pi</a>
  </p>
</div>



<div class="entry-tags"><p><span>Tags</span>
  

</p></div>	</div>

	
<div class="author-meta">

  <div class="author">
    	
    <img alt='Martin Strohmayer' src="https://www.gravatar.com/avatar/dc376a825706457b68caa281714897d5?s=100&d=identicon" class='avatar avatar-72 photo' height='72' width='72'>
    
    <span>
      Geschrieben von:<a href="http://strohmayers.com" title="Posts von Martin Strohmayer" rel="author">Martin Strohmayer</a> </span>
    </div>
    <div class="bio">
      
      
      <p>Softwareentwickler und Raspberry Pi Enthusiast.</p>
        
      
	
      

    


  
  <a class="twitter" target="_blank"
  href="https://twitter.com/m_stroh">
  <i class="fab fa-twitter-square"
  title="twitter icon"></i>
</a>




<a class="email" target="_blank"
href="mailto:martin.strohmayer@gc2.at">
<i class="fas fa-envelope"
title="email icon"></i>
</a>







<a class="github" target="_blank"
href="https://github.com/mstroh76">
<i class="fab fa-github"
title="github icon"></i>
</a>









</div>
</div>

</div>
</div>

<section id="comments" class="comments">




<script src="https://utteranc.es/client.js"
        repo="GrazerComputerClub/Blog"
        issue-term="title"
        
        theme="github-light"
        
        crossorigin="anonymous"
        async>
</script>


  

  




</section>
</div>

 



    </div>

    
<footer id="site-footer" class="site-footer" role="contentinfo">
	<h1>
    
    <a href=""> GC2 Blog </a>
    
	</h1>

			
			<p class="site-description">Infos rund um Computer, Programmierung, Elektronik und sonstige Informatik</p>
			

		<div id="menu-footer" class="menu-container menu-footer" role="navigation">
		<div class="menu">

      <ul id="menu-footer-items" class="menu-footer-items">
        
</ul>

</div>	</div>

<ul class="social-media-icons">

        

        


        
        <li>
        <a href="https://twitter.com/_gc2_"  class="twitter" target="_blank">
            <i class="fab fa-twitter-square" title="twitter"></i>
            <span class="screen-reader-text">twitter</span>
        </a>
        </li>
        

        

        
        <li>
        <a href="mailto:blog@gc2.at"  class="email">
            <i class="fas fa-envelope" title="email"></i>
            <span class="screen-reader-text">email</span>
        </a>
        </li>
        

        

        


        
        <li>
        <a href="https://github.com/GrazerComputerClub/"  class="github" target="_blank">
            <i class="fab fa-github" title="github"></i>
            <span class="screen-reader-text">github</span>
        </a>
        </li>
        


        

        
        <li>
        <a href="https://blog.gc2.at/index.xml" data-animate-hover="pulse" class="rss" target="_blank">
            <i class="fas fa-rss" title="rss"></i>
            <span class="screen-reader-text">rss</span>
        </a>
        </li>
        

				</ul>	<div class="design-credit">
		
		<p>CC-BY-4.0 <a href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></p>
		
		<p>2018, Grazer Computer Club e. V.</p>
		
		<p>Nederburg Hugo Theme by <a href="https://appernetic.io">Appernetic</a>.</p>
		
	</div>
</footer>

  </div>
  <script src="https://blog.gc2.at/js/jquery.min.js"></script>
<script src="https://blog.gc2.at/js/jquerymigrate.js"></script>
<script src="https://blog.gc2.at/js/production.min.js?v=1642174860"></script>

</body>
</html>
