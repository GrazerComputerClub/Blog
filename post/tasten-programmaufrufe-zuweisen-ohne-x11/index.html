<!DOCTYPE html>
<html lang="de-de">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https://grazercomputerclub.github.io/Blog/"
        },
        "articleSection" : "post",
        "name" : "Tastaturtasten Programmaufrufe zuweisen ohne X11",
        "headline" : "Tastaturtasten Programmaufrufe zuweisen ohne X11",
        "description" : "<p>Tastaturtasten Programmaufrufe zuweisen ist eine typische Aufgabe die von diversen X11 Oberflächen zur Verfügung gestellt werden. Mit Triggerhappy steht diese Funktion aber auch in der Shell bzw. auf Systemen ohne grafischer Oberfläche zur Verfügung. So können die Multimedia-Tasten der Tastatur oder eines Laptops zum Funktionieren gebracht werden.
</p>",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2018",
        "datePublished": "2018-10-02 00:00:00 &#43;0000 UTC",
        "dateModified" : "2018-10-02 00:00:00 &#43;0000 UTC",
        "url" : "https://grazercomputerclub.github.io/Blog/post/tasten-programmaufrufe-zuweisen-ohne-x11/",
        "wordCount" : "384",
        "image" : https://grazercomputerclub.github.io/Blog/%!s(&lt;nil&gt;)",
        "keywords" : [ "Blog" ]   
    }
    </script>


 <title>Tastaturtasten Programmaufrufe zuweisen ohne X11 </title>


<meta name="description" content="Raspberry Pi Blog des Grazer Computer Club - GC2" />



<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" id="ct-tracks-google-fonts-css" href="//fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">
<link rel="stylesheet" href="https://grazercomputerclub.github.io/Blog/css/font-awesome.min.css" type='text/css' media='all'>

<link href="https://grazercomputerclub.github.io/Blog/css/style.css" rel="stylesheet" id="theme-stylesheet" type='text/css' media='all'>

<link href="https://grazercomputerclub.github.io/Blog/css/custom.css" rel="stylesheet" type='text/css' media='all'>
<link rel="shortcut icon" href="https://grazercomputerclub.github.io/Blog/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://grazercomputerclub.github.io/Blog/img/favicon.ico" type="image/x-icon">


</head>


<body class="post-template-default single single-post single-format-standard ct-body singular singular-post not-front standard">

  <div id="overflow-container" class="overflow-container">
    <a class="skip-content" href="#main">Skip to content</a>
    <header id="site-header" class="site-header" role="banner">
      <div class='top-navigation'>
        <div class='container'>

  <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
    <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fa fa-plus"></i></button>

    <div class="menu">

      <ul id="menu-secondary-items" class="menu-secondary-items">
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/Blog/categories/raspberry-pi">Raspberry Pi</a>
        </li>
        
        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
          <a href="/Blog/categories/raspberry-pi-zero">Raspberry Pi Zero</a>
        </li>
        

      </ul>

    </div>

  </div>


  <ul class="social-media-icons">


    

    

    
    <li>
      <a href="https://twitter.com/_gc2_" data-animate-hover="pulse" class="twitter" target="_blank">
        <i class="fa fa-twitter-square" title="twitter"></i>
        <span class="screen-reader-text">twitter</span>
      </a>
    </li>
    

    

    
    <li>
      <a href="mailto:blog@gc2.at" data-animate-hover="pulse" class="email">
        <i class="fa fa-envelope" title="email"></i>
        <span class="screen-reader-text">email</span>
      </a>
    </li>
    

    

    


    
    <li>
      <a href="https://github.com/GrazerComputerClub/" data-animate-hover="pulse" class="github" target="_blank">
        <i class="fa fa-github" title="github"></i>
        <span class="screen-reader-text">github</span>
      </a>
    </li>
    


    

    
    <li>
      <a href="https://grazercomputerclub.github.io/Blog/index.xml" data-animate-hover="pulse" class="rss" target="_blank">
        <i class="fa fa-rss" title="rss"></i>
        <span class="screen-reader-text">rss</span>
      </a>
    </li>
    


  </ul></div>

      </div>

      <div class="container">
        <div id="title-info" class="title-info">
  <div id='site-title' class='site-title'>
    
    <a href="/Blog"> GC2 Raspberry Pi Blog </a>
    </div>
  </div>
  <button id="toggle-navigation" class="toggle-navigation">
    <i class="fa fa-bars"></i>
  </button>

  <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
  <div id="menu-primary" class="menu-container menu-primary" role="navigation">
    
    <p class="site-description">Infos rund um den Raspberry Pi Einplatinencomputer</p>
    

    <div class="menu">
      <ul id="menu-primary-items" class="menu-primary-items">
        
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://grazercomputerclub.github.io/Blog/index.html">Blog</a>
          
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://grazercomputerclub.github.io/Blog/impressum/">Impressum</a>
          
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="https://grazercomputerclub.github.io/Blog/contact/">Kontakt</a>
          
        </li>
        
        <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page '>
          <a href="http://gc2.at">Hauptseite</a>
          
        </li>
        
      </ul>
    </div>

  </div>

      </div>
    </header>

    <div id="main" class="main" role="main">

      
  
  
    
  
  
  <div id="loop-container" class="loop-container">
    

      <div class="post type-post status-publish format-standard hentry category-standard category-travel entry full-without-featured odd excerpt-1">

        
        <div class="entry-meta">
          <span class="date">02 October</span>	<span> / </span>

          <span class="author">
            <a href="http://strohmayers.com" title="Posts by Martin Strohmayer" rel="author">Martin Strohmayer</a>
          </span>


          
          <span class="category">
            <span> / </span>

            <a href="/categories/Blog/Raspberry%20Pi">Raspberry Pi</a>
          </span>
          


        </div>
        <div class='entry-header'>
          <h1 class='entry-title'> Tastaturtasten Programmaufrufe zuweisen ohne X11</h1>
        </div>
        <div class="entry-container">
          <div class="entry-content">
            <article>
              <p>Tastaturtasten Programmaufrufe zuweisen ist eine typische Aufgabe die von diversen X11 Oberflächen zur Verfügung gestellt werden. Mit Triggerhappy steht diese Funktion aber auch in der Shell bzw. auf Systemen ohne grafischer Oberfläche zur Verfügung. So können die Multimedia-Tasten der Tastatur oder eines Laptops zum Funktionieren gebracht werden.
</p>

<p>Triggerhappy überwacht Eingaben und gedrückte Tasten und kann dann entsprechend Befehle und Programme ausführen. Es ist ein systemweiter Dienst (service), der auch ohne einer grafische Oberfäche (X11) funktioniert. Installiert wird das Programm durch die Eingabe von &ldquo;apt-get install tiggerhappy&rdquo;, wobei es bei Raspbian allerdings bereits vorinstalliert ist.
Die Parametrierung erfolgt über Konfigurations-Dateien die sich im Verzeichnis &ldquo;/etc/triggerhappy/triggers.d/&rdquo; befinden müssen. Als erster wird der Ereignisname angegeben. Es ist auch möglich, bis zu 5 kombinierte Ereignisname hinzuzufügen. Sie werden die mit einem Plus-Zeichen verknüpft. Mögliche Ereignisname bzw. Eventcodes findet man auf der Seite <a href="https://code.woboq.org/gtk/include/linux/input-event-codes.h.html">https://code.woboq.org/gtk/include/linux/input-event-codes.h.html</a>. Dann wird der Ereigniswert (Art der Aktivierung) angegeben. Ein Wert von 1 entspricht dem Drücken einer Taste, 2 entspricht der gehaltenen Taste, die Freigabe wird durch den Wert 0 definiert. Zuletzt gibt man das auszuführende Programm an.
Eine Beispielkonfiguration für die Rasberry Pi ist das hinterlegen der Laut- und Leiser-Taste einer Multimediatastatur mit der entsprechendene Funktion. Dabei wird der PCM Audio Kanal um jeweils 2 dB verändert wenn die Taste gedrückt wird. Wird zusätzlich die linke Shift-Taste gedrückt, verändert sich der Wert um 10 dB. Dies gilt auch wenn die Taste gedrückt bleibt.</p>

<p><strong>/etc/triggerhappy/triggers.d/audio.conf</strong></p>

<pre><code># adjust volume
KEY_VOLUMEUP			1	/usr/bin/amixer set PCM 2dB+
KEY_VOLUMEUP			2	/usr/bin/amixer set PCM 2dB+
KEY_VOLUMEUP+KEY_LEFTCTRL 	1	/usr/bin/amixer set PCM 10dB+
KEY_VOLUMEUP+KEY_LEFTCTRL 	2	/usr/bin/amixer set PCM 10dB+
KEY_VOLUMEDOWN			1	/usr/bin/amixer set PCM 2dB-
KEY_VOLUMEDOWN			2	/usr/bin/amixer set PCM 2dB-
KEY_VOLUMEDOWN+KEY_LEFTCTRL 	1	/usr/bin/amixer set PCM 10dB-
KEY_VOLUMEDOWN+KEY_LEFTCTRL 	2	/usr/bin/amixer set PCM 10dB-
# shutdown
KEY_H+KEY_LEFTCTRL 	1	/sbin/halt
</code></pre>

<p>Achtung bei der Ausführung kann es zu Problemen mit den Rechten kommen. Diagnostizieren kann man es durch eine Testaktivierung und danach dem Befehl &ldquo;service triggerhappy status&rdquo;. Dann wird am Bildschirm die Ausgabe des Programmaufrufes ausgegeben. Im Fall des Verändern der Lautstärke mit &ldquo;amixer&rdquo; wird die Gruppe bzw. das Recht &ldquo;audio&rdquo; gebraucht. Deshalb muss zuvor der Benutzer &ldquo;nobody&rdquo; zur Gruppe &ldquo;audio&rdquo; hinzugefügt werden. Dies erfolgt durch Eingabe des Befehls &ldquo;adduser nobody audio&rdquo;.
Damit allen Benutzer das Herunterfahren erlaubt wird muss das Sticky-Bit für shutdown bzw. halt gesetzt werden, dies erfolgt mit folgenden Befehl &ldquo;chmod u+s /sbin/halt&rdquo;.</p>
            </article>
          </div>
          
      <div class='entry-meta-bottom'>
        

  <div class="entry-categories"><p><span>Categories</span>
    
    <a href="/Blog/categories/raspberry-pi" title="View all posts in Raspberry Pi">Raspberry Pi</a>
  </p>
</div>



<div class="entry-tags"><p><span>Tags</span>
  

</p></div>	</div>

	
<div class="author-meta">

  <div class="author">
    	
    <img alt='Martin Strohmayer' src="https://www.gravatar.com/avatar/dc376a825706457b68caa281714897d5?s=100&d=identicon" class='avatar avatar-72 photo' height='72' width='72'>
    
    <span>
      Written by:<a href="http://strohmayers.com" title="Posts by Martin Strohmayer" rel="author">Martin Strohmayer</a> </span>
    </div>
    <div class="bio">
      
      
      <p>Programmierer und Raspberry Pi Experte.</p>
        
      
	
      

    


  
  <a class="twitter" target="_blank"
  href="https://twitter.com/m_stroh">
  <i class="fa fa-twitter-square"
  title="twitter icon"></i>
</a>




<a class="email" target="_blank"
href="mailto:martin.strohmayer@gc2.at">
<i class="fa fa-envelope"
title="email icon"></i>
</a>







<a class="github" target="_blank"
href="https://github.com/mstroh76">
<i class="fa fa-github"
title="github icon"></i>
</a>









</div>
</div>

</div>
</div>

<section id="comments" class="comments">
  

  




</section>
</div>

 



    </div>

    <footer id="site-footer" class="site-footer" role="contentinfo">
	<h1>
    
    <a href=""> GC2 Raspberry Pi Blog </a>
    
	</h1>

			
			<p class="site-description">Infos rund um den Raspberry Pi Einplatinencomputer</p>
			

		<div id="menu-footer" class="menu-container menu-footer" role="navigation">
		<div class="menu">

      <ul id="menu-footer-items" class="menu-footer-items">
        
</ul>

</div>	</div>

<ul class="social-media-icons">

        

        


        
        <li>
        <a href="https://twitter.com/_gc2_"  class="twitter" target="_blank">
            <i class="fa fa-twitter-square" title="twitter"></i>
            <span class="screen-reader-text">twitter</span>
        </a>
        </li>
        

        

        
        <li>
        <a href="mailto:blog@gc2.at"  class="email">
            <i class="fa fa-envelope" title="email"></i>
            <span class="screen-reader-text">email</span>
        </a>
        </li>
        

        

        


        
        <li>
        <a href="https://github.com/GrazerComputerClub/"  class="github" target="_blank">
            <i class="fa fa-github" title="github"></i>
            <span class="screen-reader-text">github</span>
        </a>
        </li>
        


        

        
        <li>
        <a href="https://grazercomputerclub.github.io/Blog/index.xml" data-animate-hover="pulse" class="rss" target="_blank">
            <i class="fa fa-rss" title="rss"></i>
            <span class="screen-reader-text">rss</span>
        </a>
        </li>
        

				</ul>	<div class="design-credit">
		
		<p>CC-BY-4.0 <a href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></p>
		
		<p>2018, Grazer Computer Club e. V.</p>
		
		<p>Nederburg Hugo Theme by <a href="https://appernetic.io">Appernetic</a>.</p>
		
	</div>
</footer>

  </div>
  <script src="https://grazercomputerclub.github.io/Blog/js/jquery.min.js"></script>
<script src="https://grazercomputerclub.github.io/Blog/js/jquerymigrate.js"></script>
<script src="https://grazercomputerclub.github.io/Blog/js/production.min.js"></script>

</body>
</html>
